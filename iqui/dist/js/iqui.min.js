!function(){"use strict";var _config={version:"0.2.4"};angular.module("iq.ui",["ui.router","ui.bootstrap","ui.datetimepicker","ui.utils","ui.dialog","ui.loadingbar","ui.multiselect","ui.toaster","ui.select","ui.sidebar","ui.scrollbar","ui.search","ui.translate","ui.organisation","ui.templates"]).value("$commonVersion",_config.version).run(["$commonVersion","$log",function($commonVersion,$log){$log.info("iQUI Framework ",$commonVersion)}])}(),function($){var mirrored,defaults={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},copy='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',typographyStyles=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],mirror=$(copy).data("autosize",!0)[0];mirror.style.lineHeight="99px","99px"===$(mirror).css("lineHeight")&&typographyStyles.push("lineHeight"),mirror.style.lineHeight="",$.fn.autosize=function(options){return this.length?(options=$.extend({},defaults,options||{}),mirror.parentNode!==document.body&&$(document.body).append(mirror),this.each(function(){function setWidth(){var width,style=window.getComputedStyle?window.getComputedStyle(ta,null):null;style?(width=parseFloat(style.width),("border-box"===style.boxSizing||"border-box"===style.webkitBoxSizing||"border-box"===style.mozBoxSizing)&&$.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(i,val){width-=parseFloat(style[val])})):width=$ta.width(),mirror.style.width=Math.max(width,0)+"px"}function initMirror(){var styles={};if(mirrored=ta,mirror.className=options.className,mirror.id=options.id,maxHeight=parseFloat($ta.css("maxHeight")),$.each(typographyStyles,function(i,val){styles[val]=$ta.css(val)}),$(mirror).css(styles).attr("wrap",$ta.attr("wrap")),setWidth(),window.chrome){var width=ta.style.width;ta.style.width="0px";{ta.offsetWidth}ta.style.width=width}}function adjust(){var height,originalHeight;mirrored!==ta?initMirror():setWidth(),!ta.value&&options.placeholder?mirror.value=$ta.attr("placeholder")||"":mirror.value=ta.value,mirror.value+=options.append||"",mirror.style.overflowY=ta.style.overflowY,originalHeight=parseFloat(ta.style.height)||0,mirror.scrollTop=0,mirror.scrollTop=9e4,height=mirror.scrollTop,maxHeight&&height>maxHeight?(ta.style.overflowY="scroll",height=maxHeight):(ta.style.overflowY="hidden",minHeight>height&&(height=minHeight)),height+=boxOffset,Math.abs(originalHeight-height)>.01&&(ta.style.height=height+"px",mirror.className=mirror.className,callback&&options.callback.call(ta,ta),$ta.trigger("autosize.resized"))}function resize(){clearTimeout(timeout),timeout=setTimeout(function(){var newWidth=$ta.width();newWidth!==width&&(width=newWidth,adjust())},parseInt(options.resizeDelay,10))}var maxHeight,minHeight,timeout,ta=this,$ta=$(ta),boxOffset=0,callback=$.isFunction(options.callback),originalStyles={height:ta.style.height,overflow:ta.style.overflow,overflowY:ta.style.overflowY,wordWrap:ta.style.wordWrap,resize:ta.style.resize},width=$ta.width(),taResize=$ta.css("resize");$ta.data("autosize")||($ta.data("autosize",!0),("border-box"===$ta.css("box-sizing")||"border-box"===$ta.css("-moz-box-sizing")||"border-box"===$ta.css("-webkit-box-sizing"))&&(boxOffset=$ta.outerHeight()-$ta.height()-11),minHeight=Math.max(parseFloat($ta.css("minHeight"))-boxOffset||0,$ta.height()),$ta.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===taResize?$ta.css("resize","none"):"both"===taResize&&$ta.css("resize","horizontal"),"onpropertychange"in ta?"oninput"in ta?$ta.on("input.autosize keyup.autosize",adjust):$ta.on("propertychange.autosize",function(){"value"===event.propertyName&&adjust()}):$ta.on("input.autosize",adjust),options.resizeDelay!==!1&&$(window).on("resize.autosize",resize),$ta.on("autosize.resize",adjust),$ta.on("autosize.resizeIncludeStyle",function(){mirrored=null,adjust()}),$ta.on("autosize.destroy",function(){mirrored=null,clearTimeout(timeout),$(window).off("resize",resize),$ta.off("autosize").off(".autosize").css(originalStyles).removeData("autosize")}),adjust())})):this}}(jQuery||$),angular.module("mgcrea.ngStrap.helpers.dateFormatter",[]).service("$dateFormatter",["$locale","dateFilter",function($locale,dateFilter){function splitTimeFormat(format){return/(h+)([:\.])?(m+)([:\.])?(s*)[ ]?(a?)/i.exec(format).slice(1)}this.getDefaultLocale=function(){return $locale.id},this.getDatetimeFormat=function(format,lang){return $locale.DATETIME_FORMATS[format]||format},this.weekdaysShort=function(lang){return $locale.DATETIME_FORMATS.SHORTDAY},this.hoursFormat=function(timeFormat){return splitTimeFormat(timeFormat)[0]},this.minutesFormat=function(timeFormat){return splitTimeFormat(timeFormat)[2]},this.secondsFormat=function(timeFormat){return splitTimeFormat(timeFormat)[4]},this.timeSeparator=function(timeFormat){return splitTimeFormat(timeFormat)[1]},this.showSeconds=function(timeFormat){return!!splitTimeFormat(timeFormat)[4]},this.showAM=function(timeFormat){return!!splitTimeFormat(timeFormat)[5]},this.formatDate=function(date,format,lang,timezone){return dateFilter(date,format,timezone)}}]),angular.module("mgcrea.ngStrap.helpers.dateParser",[]).provider("$dateParser",["$localeProvider",function($localeProvider){function ParseDate(){this.year=1970,this.month=0,this.day=1,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0}function noop(){}function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n)}function indexOfCaseInsensitive(array,value){for(var len=array.length,str=value.toString().toLowerCase(),i=0;len>i;i++)if(array[i].toLowerCase()===str)return i;return-1}ParseDate.prototype.setMilliseconds=function(value){this.milliseconds=value},ParseDate.prototype.setSeconds=function(value){this.seconds=value},ParseDate.prototype.setMinutes=function(value){this.minutes=value},ParseDate.prototype.setHours=function(value){this.hours=value},ParseDate.prototype.getHours=function(){return this.hours},ParseDate.prototype.setDate=function(value){this.day=value},ParseDate.prototype.setMonth=function(value){this.month=value},ParseDate.prototype.setFullYear=function(value){this.year=value},ParseDate.prototype.fromDate=function(value){return this.year=value.getFullYear(),this.month=value.getMonth(),this.day=value.getDate(),this.hours=value.getHours(),this.minutes=value.getMinutes(),this.seconds=value.getSeconds(),this.milliseconds=value.getMilliseconds(),this},ParseDate.prototype.toDate=function(){return new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds)};var proto=ParseDate.prototype,defaults=this.defaults={format:"shortDate",strict:!1};this.$get=["$locale","dateFilter",function($locale,dateFilter){var DateParserFactory=function(config){function setMapForFormat(format){var i,keys=Object.keys(setFnMap),map=[],sortedMap=[],clonedFormat=format;for(i=0;i<keys.length;i++)if(format.split(keys[i]).length>1){var index=clonedFormat.search(keys[i]);format=format.split(keys[i]).join(""),setFnMap[keys[i]]&&(map[index]=setFnMap[keys[i]])}return angular.forEach(map,function(v){v&&sortedMap.push(v)}),sortedMap}function escapeReservedSymbols(text){return text.replace(/\//g,"[\\/]").replace("/-/g","[-]").replace(/\./g,"[.]").replace(/\\s/g,"[\\s]")}function regExpForFormat(format){var i,keys=Object.keys(regExpMap),re=format;for(i=0;i<keys.length;i++)re=re.split(keys[i]).join("${"+i+"}");for(i=0;i<keys.length;i++)re=re.split("${"+i+"}").join("("+regExpMap[keys[i]]+")");return format=escapeReservedSymbols(format),new RegExp("^"+re+"$",["i"])}var regex,setMap,options=angular.extend({},defaults,config),$dateParser={},regExpMap={sss:"[0-9]{3}",ss:"[0-5][0-9]",s:options.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",mm:"[0-5][0-9]",m:options.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",HH:"[01][0-9]|2[0-3]",H:options.strict?"1?[0-9]|2[0-3]":"[01]?[0-9]|2[0-3]",hh:"[0][1-9]|[1][012]",h:options.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",a:"AM|PM",EEEE:$locale.DATETIME_FORMATS.DAY.join("|"),EEE:$locale.DATETIME_FORMATS.SHORTDAY.join("|"),dd:"0[1-9]|[12][0-9]|3[01]",d:options.strict?"[1-9]|[1-2][0-9]|3[01]":"0?[1-9]|[1-2][0-9]|3[01]",MMMM:$locale.DATETIME_FORMATS.MONTH.join("|"),MMM:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),MM:"0[1-9]|1[012]",M:options.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",yyyy:"[1]{1}[0-9]{3}|[2]{1}[0-9]{3}",yy:"[0-9]{2}",y:options.strict?"-?(0|[1-9][0-9]{0,3})":"-?0*[0-9]{1,4}"},setFnMap={sss:proto.setMilliseconds,ss:proto.setSeconds,s:proto.setSeconds,mm:proto.setMinutes,m:proto.setMinutes,HH:proto.setHours,H:proto.setHours,hh:proto.setHours,h:proto.setHours,EEEE:noop,EEE:noop,dd:proto.setDate,d:proto.setDate,a:function(value){var hours=this.getHours()%12;return this.setHours(value.match(/pm/i)?hours+12:hours)},MMMM:function(value){return this.setMonth(indexOfCaseInsensitive($locale.DATETIME_FORMATS.MONTH,value))},MMM:function(value){return this.setMonth(indexOfCaseInsensitive($locale.DATETIME_FORMATS.SHORTMONTH,value))},MM:function(value){return this.setMonth(1*value-1)},M:function(value){return this.setMonth(1*value-1)},yyyy:proto.setFullYear,yy:function(value){return this.setFullYear(2e3+1*value)},y:proto.setFullYear};return $dateParser.init=function(){$dateParser.$format=$locale.DATETIME_FORMATS[options.format]||options.format,regex=regExpForFormat($dateParser.$format),setMap=setMapForFormat($dateParser.$format)},$dateParser.isValid=function(date){return angular.isDate(date)?!isNaN(date.getTime()):regex.test(date)},$dateParser.parse=function(value,baseDate,format,timezone){format&&(format=$locale.DATETIME_FORMATS[format]||format),angular.isDate(value)&&(value=dateFilter(value,format||$dateParser.$format,timezone));var formatRegex=format?regExpForFormat(format):regex,formatSetMap=format?setMapForFormat(format):setMap,matches=formatRegex.exec(value);if(!matches)return!1;for(var date=(new ParseDate).fromDate(baseDate&&!isNaN(baseDate.getTime())?baseDate:new Date(1970,0,1,0)),i=0;i<matches.length-1;i++)formatSetMap[i]&&formatSetMap[i].call(date,matches[i+1]);var newDate=date.toDate();return parseInt(date.day,10)!==newDate.getDate()?!1:newDate},$dateParser.getDateForAttribute=function(key,value){var date;if("today"===value){var today=new Date;date=new Date(today.getFullYear(),today.getMonth(),today.getDate()+("maxDate"===key?1:0),0,0,0,"minDate"===key?0:-1)}else date=angular.isString(value)&&value.match(/^".+"$/)?new Date(value.substr(1,value.length-2)):isNumeric(value)?new Date(parseInt(value,10)):angular.isString(value)&&0===value.length?"minDate"===key?-(1/0):+(1/0):new Date(value);return date},$dateParser.getTimeForAttribute=function(key,value){var time;return time="now"===value?(new Date).setFullYear(1970,0,1):angular.isString(value)&&value.match(/^".+"$/)?new Date(value.substr(1,value.length-2)).setFullYear(1970,0,1):isNumeric(value)?new Date(parseInt(value,10)).setFullYear(1970,0,1):angular.isString(value)&&0===value.length?"minTime"===key?-(1/0):+(1/0):$dateParser.parse(value,new Date(1970,0,1,0))},$dateParser.daylightSavingAdjust=function(date){return date?(date.setHours(date.getHours()>12?date.getHours()+2:0),date):null},$dateParser.timezoneOffsetAdjust=function(date,timezone,undo){return date?(timezone&&"UTC"===timezone&&(date=new Date(date.getTime()),date.setMinutes(date.getMinutes()+(undo?-1:1)*date.getTimezoneOffset())),date):null},$dateParser.init(),$dateParser};return DateParserFactory}]}]),angular.module("mgcrea.ngStrap.datepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.dateFormatter","mgcrea.ngStrap.tooltip"]).provider("$datepicker",function(){var defaults=this.defaults={animation:"am-fade",prefixClass:"datepicker",placement:"bottom-left",template:"template/datetimepicker/datepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:"date",dateFormat:"shortDate",timezone:null,modelDateFormat:null,dayFormat:"dd",monthFormat:"MMM",yearFormat:"yyyy",monthTitleFormat:"MMMM yyyy",yearTitleFormat:"yyyy",strictFormat:!1,autoclose:!1,minDate:-(1/0),maxDate:+(1/0),startView:0,minView:0,startWeek:0,daysOfWeekDisabled:"",iconLeft:"glyphicon glyphicon-chevron-left",iconRight:"glyphicon glyphicon-chevron-right"};this.$get=["$window","$document","$rootScope","$sce","$dateFormatter","datepickerViews","$bsTooltip","$timeout",function($window,$document,$rootScope,$sce,$dateFormatter,datepickerViews,$bsTooltip,$timeout){function DatepickerFactory(element,controller,config){function updateSelected(el){el.selected=$datepicker.$isSelected(el.date)}function focusElement(){element[0].focus()}var $datepicker=$bsTooltip(element,angular.extend({},defaults,config)),parentScope=config.scope,options=$datepicker.$options,scope=$datepicker.$scope;options.startView&&(options.startView-=options.minView);var pickerViews=datepickerViews($datepicker);$datepicker.$views=pickerViews.views;var viewDate=pickerViews.viewDate;scope.$mode=options.startView,scope.$iconLeft=options.iconLeft,scope.$iconRight=options.iconRight;var $picker=$datepicker.$views[scope.$mode];scope.$select=function(date){$datepicker.select(date)},scope.$selectPane=function(value){$datepicker.$selectPane(value)},scope.$toggleMode=function(){$datepicker.setMode((scope.$mode+1)%$datepicker.$views.length)},scope.$today=function(){$datepicker.select(new Date)},scope.$clear=function(){controller.$setViewValue(""),controller.$commitViewValue(),controller.$modelValue=null,controller.$dateValue=null,controller.$render(),$timeout(function(){$datepicker.hide(!0)})},scope.$close=function(){$timeout(function(){$datepicker.hide(!0)})},$datepicker.update=function(date){angular.isDate(date)&&!isNaN(date.getTime())&&($datepicker.$date=date,$picker.update.call($picker,date)),$datepicker.$build(!0)},$datepicker.updateDisabledDates=function(dateRanges){options.disabledDateRanges=dateRanges;for(var i=0,l=scope.rows.length;l>i;i++)angular.forEach(scope.rows[i],$datepicker.$setDisabledEl)},$datepicker.select=function(date,keep){angular.isDate(controller.$dateValue)||(controller.$dateValue=new Date(date)),!scope.$mode||keep?(controller.$setViewValue(angular.copy(date)),controller.$render(),options.autoclose&&!keep&&$timeout(function(){$datepicker.hide(!0)})):(angular.extend(viewDate,{year:date.getFullYear(),month:date.getMonth(),date:date.getDate()}),$datepicker.setMode(scope.$mode-1),$datepicker.$build())},$datepicker.setMode=function(mode){scope.$mode=mode,$picker=$datepicker.$views[scope.$mode],$datepicker.$build()},$datepicker.$build=function(pristine){pristine===!0&&$picker.built||(pristine!==!1||$picker.built)&&$picker.build.call($picker)},$datepicker.$updateSelected=function(){for(var i=0,l=scope.rows.length;l>i;i++)angular.forEach(scope.rows[i],updateSelected)},$datepicker.$isSelected=function(date){return $picker.isSelected(date)},$datepicker.$setDisabledEl=function(el){el.disabled=$picker.isDisabled(el.date)},$datepicker.$selectPane=function(value){var steps=$picker.steps,targetDate=new Date(Date.UTC(viewDate.year+(steps.year||0)*value,viewDate.month+(steps.month||0)*value,1));angular.extend(viewDate,{year:targetDate.getUTCFullYear(),month:targetDate.getUTCMonth(),date:targetDate.getUTCDate()}),$datepicker.$build()},$datepicker.$onMouseDown=function(evt){if(evt.preventDefault(),evt.stopPropagation(),isTouch){var targetEl=angular.element(evt.target);"button"!==targetEl[0].nodeName.toLowerCase()&&(targetEl=targetEl.parent()),targetEl.triggerHandler("click")}},$datepicker.$onKeyDown=function(evt){if(/(38|37|39|40|13)/.test(evt.keyCode)&&!evt.shiftKey&&!evt.altKey){if(evt.preventDefault(),evt.stopPropagation(),13===evt.keyCode)return scope.$mode?scope.$apply(function(){$datepicker.setMode(scope.$mode-1)}):$datepicker.hide(!0);$picker.onKeyDown(evt),parentScope.$digest()}};var _init=$datepicker.init;$datepicker.init=function(){return isNative&&options.useNative?(element.prop("type","date"),void element.css("-webkit-appearance","textfield")):(isTouch&&(element.prop("type","text"),element.attr("readonly","true"),element.on("click",focusElement)),void _init())};var _destroy=$datepicker.destroy;$datepicker.destroy=function(){isNative&&options.useNative&&element.off("click",focusElement),_destroy()};var _show=$datepicker.show;$datepicker.show=function(){_show(),$timeout(function(){$datepicker.$isShown&&($datepicker.$element.on(isTouch?"touchstart":"mousedown",$datepicker.$onMouseDown),options.keyboard&&element.on("keydown",$datepicker.$onKeyDown))},0,!1)};var _hide=$datepicker.hide;return $datepicker.hide=function(blur){$datepicker.$isShown&&($datepicker.$element.off(isTouch?"touchstart":"mousedown",$datepicker.$onMouseDown),options.keyboard&&element.off("keydown",$datepicker.$onKeyDown),_hide(blur))},$datepicker}var isNative=(angular.element($window.document.body),/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent)),isTouch="createTouch"in $window.document&&isNative;return defaults.lang||(defaults.lang=$dateFormatter.getDefaultLocale()),DatepickerFactory.defaults=defaults,DatepickerFactory}]}).directive("bsDatepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$datepicker",function($window,$parse,$q,$dateFormatter,$dateParser,$datepicker){var isNative=($datepicker.defaults,/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent));return{restrict:"EAC",require:"ngModel",link:function(scope,element,attr,controller){function normalizeDateRanges(ranges){return ranges&&ranges.length?ranges:null}function validateAgainstMinMaxDate(parsedDate){if(angular.isDate(parsedDate)){var isMinValid=isNaN(datepicker.$options.minDate)||parsedDate.getTime()>=datepicker.$options.minDate,isMaxValid=isNaN(datepicker.$options.maxDate)||parsedDate.getTime()<=datepicker.$options.maxDate,isValid=isMinValid&&isMaxValid;controller.$setValidity("date",isValid),controller.$setValidity("min",isMinValid),controller.$setValidity("max",isMaxValid),isValid&&(controller.$dateValue=parsedDate)}}function getDateFormattedString(){return!controller.$dateValue||isNaN(controller.$dateValue.getTime())?"":formatDate(controller.$dateValue,options.dateFormat)}var options={scope:scope,controller:controller};angular.forEach(["placement","container","delay","trigger","html","animation","template","autoclose","dateType","dateFormat","timezone","modelDateFormat","dayFormat","strictFormat","startWeek","startDate","useNative","lang","startView","minView","iconLeft","iconRight","daysOfWeekDisabled","id","prefixClass","prefixEvent"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])});var falseValueRegExp=/^(false|0|)$/i;angular.forEach(["html","container","autoclose","useNative"],function(key){angular.isDefined(attr[key])&&falseValueRegExp.test(attr[key])&&(options[key]=!1)}),attr.bsShow&&scope.$watch(attr.bsShow,function(newValue,oldValue){datepicker&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(/true|,?(datepicker),?/i)),newValue===!0?datepicker.show():datepicker.hide())});var datepicker=$datepicker(element,controller,options);options=datepicker.$options,isNative&&options.useNative&&(options.dateFormat="yyyy-MM-dd");var lang=options.lang,formatDate=function(date,format){return $dateFormatter.formatDate(date,format,lang)},dateParser=$dateParser({format:options.dateFormat,lang:lang,strict:options.strictFormat});angular.forEach(["minDate","maxDate"],function(key){angular.isDefined(attr[key])&&attr.$observe(key,function(newValue){datepicker.$options[key]=dateParser.getDateForAttribute(key,newValue),!isNaN(datepicker.$options[key])&&datepicker.$build(!1),validateAgainstMinMaxDate(controller.$dateValue)})}),scope.$watch(attr.ngModel,function(newValue,oldValue){datepicker.update(controller.$dateValue)},!0),angular.isDefined(attr.disabledDates)&&scope.$watch(attr.disabledDates,function(disabledRanges,previousValue){disabledRanges=normalizeDateRanges(disabledRanges),previousValue=normalizeDateRanges(previousValue),disabledRanges&&datepicker.updateDisabledDates(disabledRanges)}),controller.$parsers.unshift(function(viewValue){var date;if(!viewValue)return controller.$setValidity("date",!0),null;var parsedDate=dateParser.parse(viewValue,controller.$dateValue);return!parsedDate||isNaN(parsedDate.getTime())?void controller.$setValidity("date",!1):(validateAgainstMinMaxDate(parsedDate),"string"===options.dateType?(date=dateParser.timezoneOffsetAdjust(parsedDate,options.timezone,!0),formatDate(date,options.modelDateFormat||options.dateFormat)):(date=dateParser.timezoneOffsetAdjust(controller.$dateValue,options.timezone,!0),"number"===options.dateType?date.getTime():"unix"===options.dateType?date.getTime()/1e3:"iso"===options.dateType?date.toISOString():new Date(date)))}),controller.$formatters.push(function(modelValue){var date;return date=angular.isUndefined(modelValue)||null===modelValue?0/0:angular.isDate(modelValue)?modelValue:"string"===options.dateType?dateParser.parse(modelValue,null,options.modelDateFormat):new Date("unix"===options.dateType?1e3*modelValue:modelValue),controller.$dateValue=dateParser.timezoneOffsetAdjust(date,options.timezone),getDateFormattedString()}),controller.$render=function(){element.val(getDateFormattedString())},scope.$on("$destroy",function(){datepicker&&datepicker.destroy(),options=null,datepicker=null})}}}]).provider("datepickerViews",function(){function split(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays}function mod(n,m){return(n%m+m)%m}this.defaults={dayFormat:"dd",daySplit:7};this.$get=["$dateFormatter","$dateParser","$sce",function($dateFormatter,$dateParser,$sce){return function(picker){var scope=picker.$scope,options=picker.$options,lang=options.lang,formatDate=function(date,format){return $dateFormatter.formatDate(date,format,lang)},dateParser=$dateParser({format:options.dateFormat,lang:lang,strict:options.strictFormat}),weekDaysMin=$dateFormatter.weekdaysShort(lang),weekDaysLabels=weekDaysMin.slice(options.startWeek).concat(weekDaysMin.slice(0,options.startWeek)),weekDaysLabelsHtml=$sce.trustAsHtml('<th class="dow text-center">'+weekDaysLabels.join('</th><th class="dow text-center">')+"</th>"),startDate=picker.$date||(options.startDate?dateParser.getDateForAttribute("startDate",options.startDate):new Date),viewDate={year:startDate.getFullYear(),month:startDate.getMonth(),date:startDate.getDate()},views=[{format:options.dayFormat,split:7,steps:{month:1},update:function(date,force){!this.built||force||date.getFullYear()!==viewDate.year||date.getMonth()!==viewDate.month?(angular.extend(viewDate,{year:picker.$date.getFullYear(),month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$build()):(date.getDate()!==viewDate.date||1===date.getDate())&&(viewDate.date=picker.$date.getDate(),picker.$updateSelected())},build:function(){var firstDayOfMonth=new Date(viewDate.year,viewDate.month,1),firstDayOfMonthOffset=firstDayOfMonth.getTimezoneOffset(),firstDate=new Date(+firstDayOfMonth-864e5*mod(firstDayOfMonth.getDay()-options.startWeek,7)),firstDateOffset=firstDate.getTimezoneOffset(),today=dateParser.timezoneOffsetAdjust(new Date,options.timezone).toDateString();firstDateOffset!==firstDayOfMonthOffset&&(firstDate=new Date(+firstDate+6e4*(firstDateOffset-firstDayOfMonthOffset)));for(var day,days=[],i=0;42>i;i++)day=dateParser.daylightSavingAdjust(new Date(firstDate.getFullYear(),firstDate.getMonth(),firstDate.getDate()+i)),days.push({date:day,isToday:day.toDateString()===today,label:formatDate(day,this.format),selected:picker.$date&&this.isSelected(day),muted:day.getMonth()!==viewDate.month,disabled:this.isDisabled(day)});scope.title=formatDate(firstDayOfMonth,options.monthTitleFormat),scope.showLabels=!0,scope.labels=weekDaysLabelsHtml,scope.rows=split(days,this.split),this.built=!0},isSelected:function(date){return picker.$date&&date.getFullYear()===picker.$date.getFullYear()&&date.getMonth()===picker.$date.getMonth()&&date.getDate()===picker.$date.getDate()},isDisabled:function(date){var time=date.getTime();if(time<options.minDate||time>options.maxDate)return!0;if(-1!==options.daysOfWeekDisabled.indexOf(date.getDay()))return!0;if(options.disabledDateRanges)for(var i=0;i<options.disabledDateRanges.length;i++)if(time>=options.disabledDateRanges[i].start&&time<=options.disabledDateRanges[i].end)return!0;return!1},onKeyDown:function(evt){if(picker.$date){var newDate,actualTime=picker.$date.getTime();37===evt.keyCode?newDate=new Date(actualTime-864e5):38===evt.keyCode?newDate=new Date(actualTime-6048e5):39===evt.keyCode?newDate=new Date(actualTime+864e5):40===evt.keyCode&&(newDate=new Date(actualTime+6048e5)),this.isDisabled(newDate)||picker.select(newDate,!0)}}},{name:"month",format:options.monthFormat,split:4,steps:{year:1},update:function(date,force){this.built&&date.getFullYear()===viewDate.year?date.getMonth()!==viewDate.month&&(angular.extend(viewDate,{month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$updateSelected()):(angular.extend(viewDate,{year:picker.$date.getFullYear(),month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$build())},build:function(){for(var month,months=(new Date(viewDate.year,0,1),[]),i=0;12>i;i++)month=new Date(viewDate.year,i,1),months.push({date:month,label:formatDate(month,this.format),selected:picker.$isSelected(month),disabled:this.isDisabled(month)});scope.title=formatDate(month,options.yearTitleFormat),scope.showLabels=!1,scope.rows=split(months,this.split),this.built=!0},isSelected:function(date){return picker.$date&&date.getFullYear()===picker.$date.getFullYear()&&date.getMonth()===picker.$date.getMonth()},isDisabled:function(date){var lastDate=+new Date(date.getFullYear(),date.getMonth()+1,0);return lastDate<options.minDate||date.getTime()>options.maxDate},onKeyDown:function(evt){if(picker.$date){var actualMonth=picker.$date.getMonth(),newDate=new Date(picker.$date);37===evt.keyCode?newDate.setMonth(actualMonth-1):38===evt.keyCode?newDate.setMonth(actualMonth-4):39===evt.keyCode?newDate.setMonth(actualMonth+1):40===evt.keyCode&&newDate.setMonth(actualMonth+4),this.isDisabled(newDate)||picker.select(newDate,!0)}}},{name:"year",format:options.yearFormat,split:4,steps:{year:12},update:function(date,force){!this.built||force||parseInt(date.getFullYear()/20,10)!==parseInt(viewDate.year/20,10)?(angular.extend(viewDate,{year:picker.$date.getFullYear(),month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$build()):date.getFullYear()!==viewDate.year&&(angular.extend(viewDate,{year:picker.$date.getFullYear(),month:picker.$date.getMonth(),date:picker.$date.getDate()}),picker.$updateSelected())},build:function(){for(var year,firstYear=viewDate.year-viewDate.year%(3*this.split),years=[],i=0;12>i;i++)year=new Date(firstYear+i,0,1),years.push({date:year,label:formatDate(year,this.format),selected:picker.$isSelected(year),disabled:this.isDisabled(year)});scope.title=years[0].label+"-"+years[years.length-1].label,scope.showLabels=!1,scope.rows=split(years,this.split),this.built=!0},isSelected:function(date){return picker.$date&&date.getFullYear()===picker.$date.getFullYear()},isDisabled:function(date){var lastDate=+new Date(date.getFullYear()+1,0,0);return lastDate<options.minDate||date.getTime()>options.maxDate},onKeyDown:function(evt){if(picker.$date){var actualYear=picker.$date.getFullYear(),newDate=new Date(picker.$date);37===evt.keyCode?newDate.setYear(actualYear-1):38===evt.keyCode?newDate.setYear(actualYear-4):39===evt.keyCode?newDate.setYear(actualYear+1):40===evt.keyCode&&newDate.setYear(actualYear+4),this.isDisabled(newDate)||picker.select(newDate,!0)}}}];return{views:options.minView?Array.prototype.slice.call(views,options.minView):views,viewDate:viewDate}}}]}),function(){"use strict";angular.module("ui.datetimepicker",["mgcrea.ngStrap.datepicker","mgcrea.ngStrap.timepicker"]).config(["$datepickerProvider","$timepickerProvider",function($datepickerProvider,$timepickerProvider){angular.extend($datepickerProvider.defaults,{dateType:"unix",startWeek:1,autoclose:1}),angular.extend($timepickerProvider.defaults,{timeFormat:"HH:mm:ss",timeType:"unix",length:10,autoclose:0})}]).directive("isDirty",function(){return{restrict:"AE",require:"ngModel",link:function(scope,element,attrs,ngModelCtrl){attrs.$observe("isDirty",function(value){value&&ngModelCtrl.$setDirty()})}}}).directive("datetimepicker",["$parse","$dateParser","$datepicker","$timepicker","$locale",function($parse,$dateParser,$datepicker,$timepicker,$locale){function getDateFromTimestamp(timestamp){var date=timestamp;return timestamp&&!angular.isDate(timestamp)&&(date=moment.unix(timestamp).toDate()),date}function dashCase(name){return name.replace(/[A-Z]/g,function(letter,pos){return(pos?"-":"")+letter.toLowerCase()})}return{restrict:"EA",require:"ngModel",replace:!0,priority:1,scope:{ngModel:"="},templateUrl:"template/datetimepicker/datetimepicker.html",compile:function(template,attrs){var inputs,dateInput,timeInput;return inputs=template.find("input"),dateInput=angular.element(inputs[0]),timeInput=angular.element(inputs[1]),angular.forEach(["autoclose","dateFormat","dateType","ngDisabled"],function(key){angular.isDefined(attrs[key])&&dateInput.attr(dashCase(key),attrs[key])}),angular.forEach(["autoclose","timeFormat","timeType","ngDisabled"],function(key){angular.isDefined(attrs[key])&&timeInput.attr(dashCase(key),attrs[key])}),angular.isDefined(attrs.name)&&(dateInput.attr("name",attrs.name),timeInput.attr("name",attrs.name+"Time")),function(scope,element,attrs,ngModelCtrl){var dateFormat,timeFormat;element.removeClass("form-control"),angular.isDefined(attrs.dateOnly)&&(scope.dateOnly="true"===attrs.dateOnly),dateFormat=angular.isDefined(attrs.dateFormat)?attrs.dateFormat:$datepicker.defaults.dateFormat,scope.dateFormat=$locale.DATETIME_FORMATS[dateFormat]||dateFormat,timeFormat=angular.isDefined(attrs.timeFormat)?attrs.timeFormat:$timepicker.defaults.timeFormat,scope.timeFormat=$locale.DATETIME_FORMATS[timeFormat]||timeFormat,angular.isDefined(attrs.dateType)?scope.dateType=attrs.dateType:scope.dateType=$datepicker.defaults.dateType,scope.touchDate=function(){scope.isDirty=!0},attrs.$observe("minDate",function(value){"unix"===scope.dateType?scope.minDate=getDateFromTimestamp(value):scope.minDate=value}),attrs.$observe("maxDate",function(value){"unix"!==scope.dateType?scope.maxDate=getDateFromTimestamp(value):scope.minDate=value})}}}}])}(),angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",["$document","$window",function($document,$window){var fn=(angular.element,{}),nodeName=fn.nodeName=function(element,name){return element.nodeName&&element.nodeName.toLowerCase()===name.toLowerCase()};fn.css=function(element,prop,extra){var value;return value=element.currentStyle?element.currentStyle[prop]:window.getComputedStyle?window.getComputedStyle(element)[prop]:element.style[prop],extra===!0?parseFloat(value)||0:value},fn.offset=function(element){var boxRect=element.getBoundingClientRect(),docElement=element.ownerDocument;return{width:boxRect.width||element.offsetWidth,height:boxRect.height||element.offsetHeight,top:boxRect.top+(window.pageYOffset||docElement.documentElement.scrollTop)-(docElement.documentElement.clientTop||0),left:boxRect.left+(window.pageXOffset||docElement.documentElement.scrollLeft)-(docElement.documentElement.clientLeft||0)}},fn.setOffset=function(element,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=fn.css(element,"position"),curElem=angular.element(element),props={};"static"===position&&(element.style.position="relative"),curOffset=fn.offset(element),curCSSTop=fn.css(element,"top"),curCSSLeft=fn.css(element,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&(curCSSTop+curCSSLeft).indexOf("auto")>-1,
calculatePosition?(curPosition=fn.position(element),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),angular.isFunction(options)&&(options=options.call(element,i,curOffset)),null!==options.top&&(props.top=options.top-curOffset.top+curTop),null!==options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(curElem,props):curElem.css({top:props.top+"px",left:props.left+"px"})},fn.position=function(element){var offsetParentElement,offset,offsetParentRect={top:0,left:0};return"fixed"===fn.css(element,"position")?offset=element.getBoundingClientRect():(offsetParentElement=offsetParent(element),offset=fn.offset(element),nodeName(offsetParentElement,"html")||(offsetParentRect=fn.offset(offsetParentElement)),offsetParentRect.top+=fn.css(offsetParentElement,"borderTopWidth",!0),offsetParentRect.left+=fn.css(offsetParentElement,"borderLeftWidth",!0)),{width:element.offsetWidth,height:element.offsetHeight,top:offset.top-offsetParentRect.top-fn.css(element,"marginTop",!0),left:offset.left-offsetParentRect.left-fn.css(element,"marginLeft",!0)}};var offsetParent=function(element){var docElement=element.ownerDocument,offsetParent=element.offsetParent||docElement;if(nodeName(offsetParent,"#document"))return docElement.documentElement;for(;offsetParent&&!nodeName(offsetParent,"html")&&"static"===fn.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElement.documentElement};return fn.height=function(element,outer){var value=element.offsetHeight;return outer?value+=fn.css(element,"marginTop",!0)+fn.css(element,"marginBottom",!0):value-=fn.css(element,"paddingTop",!0)+fn.css(element,"paddingBottom",!0)+fn.css(element,"borderTopWidth",!0)+fn.css(element,"borderBottomWidth",!0),value},fn.width=function(element,outer){var value=element.offsetWidth;return outer?value+=fn.css(element,"marginLeft",!0)+fn.css(element,"marginRight",!0):value-=fn.css(element,"paddingLeft",!0)+fn.css(element,"paddingRight",!0)+fn.css(element,"borderLeftWidth",!0)+fn.css(element,"borderRightWidth",!0),value},fn}]),angular.module("mgcrea.ngStrap.timepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.dateFormatter","mgcrea.ngStrap.tooltip"]).provider("$timepicker",function(){var defaults=this.defaults={animation:"am-fade",prefixClass:"timepicker",placement:"bottom-left",template:"template/datetimepicker/timepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!0,timeType:"date",timeFormat:"shortTime",timezone:null,modelTimeFormat:null,autoclose:!1,minTime:-(1/0),maxTime:+(1/0),length:5,hourStep:1,minuteStep:5,secondStep:5,roundDisplay:!1,iconUp:"glyphicon glyphicon-chevron-up",iconDown:"glyphicon glyphicon-chevron-down",arrowBehavior:"pager"};this.$get=["$window","$document","$rootScope","$sce","$dateFormatter","$bsTooltip","$timeout",function($window,$document,$rootScope,$sce,$dateFormatter,$bsTooltip,$timeout){function timepickerFactory(element,controller,config){function floorMinutes(time){var coeff=6e4*options.minuteStep;return new Date(Math.floor(time.getTime()/coeff)*coeff)}function createSelection(start,length){var end=start+length;if(element[0].createTextRange){var selRange=element[0].createTextRange();selRange.collapse(!0),selRange.moveStart("character",start),selRange.moveEnd("character",end),selRange.select()}else element[0].setSelectionRange?element[0].setSelectionRange(start,end):angular.isUndefined(element[0].selectionStart)&&(element[0].selectionStart=start,element[0].selectionEnd=end)}function focusElement(){element[0].focus()}var $timepicker=$bsTooltip(element,angular.extend({},defaults,config)),parentScope=config.scope,options=$timepicker.$options,scope=$timepicker.$scope,lang=options.lang,formatDate=function(date,format,timezone){return $dateFormatter.formatDate(date,format,lang,timezone)},selectedIndex=0,defaultDate=options.roundDisplay?floorMinutes(new Date):new Date,startDate=controller.$dateValue||defaultDate,viewDate={hour:startDate.getHours(),meridian:startDate.getHours()<12,minute:startDate.getMinutes(),second:startDate.getSeconds(),millisecond:startDate.getMilliseconds()},format=$dateFormatter.getDatetimeFormat(options.timeFormat,lang),hoursFormat=$dateFormatter.hoursFormat(format),timeSeparator=$dateFormatter.timeSeparator(format),minutesFormat=$dateFormatter.minutesFormat(format),secondsFormat=$dateFormatter.secondsFormat(format),showSeconds=$dateFormatter.showSeconds(format),showAM=$dateFormatter.showAM(format);scope.$iconUp=options.iconUp,scope.$iconDown=options.iconDown,scope.$select=function(date,index){$timepicker.select(date,index)},scope.$moveIndex=function(value,index){$timepicker.$moveIndex(value,index)},scope.$switchMeridian=function(date){$timepicker.switchMeridian(date)},$timepicker.update=function(date){angular.isDate(date)&&!isNaN(date.getTime())?($timepicker.$date=date,angular.extend(viewDate,{hour:date.getHours(),minute:date.getMinutes(),second:date.getSeconds(),millisecond:date.getMilliseconds()}),$timepicker.$build()):$timepicker.$isBuilt||$timepicker.$build()},$timepicker.select=function(date,index,keep){(!controller.$dateValue||isNaN(controller.$dateValue.getTime()))&&(controller.$dateValue=new Date(1970,0,1)),angular.isDate(date)||(date=new Date(date)),0===index?controller.$dateValue.setHours(date.getHours()):1===index?controller.$dateValue.setMinutes(date.getMinutes()):2===index&&controller.$dateValue.setSeconds(date.getSeconds()),controller.$setViewValue(angular.copy(controller.$dateValue)),controller.$render(),options.autoclose&&!keep&&$timeout(function(){$timepicker.hide(!0)})},$timepicker.switchMeridian=function(date){if(controller.$dateValue&&!isNaN(controller.$dateValue.getTime())){var hours=(date||controller.$dateValue).getHours();controller.$dateValue.setHours(12>hours?hours+12:hours-12),controller.$setViewValue(angular.copy(controller.$dateValue)),controller.$render()}},$timepicker.$build=function(){var i,hour,midIndex=scope.midIndex=parseInt(options.length/2,10),hours=[];for(i=0;i<options.length;i++)hour=new Date(1970,0,1,viewDate.hour-(midIndex-i)*options.hourStep),hours.push({date:hour,label:formatDate(hour,hoursFormat),selected:$timepicker.$date&&$timepicker.$isSelected(hour,0),disabled:$timepicker.$isDisabled(hour,0)});var minute,minutes=[];for(i=0;i<options.length;i++)minute=new Date(1970,0,1,0,viewDate.minute-(midIndex-i)*options.minuteStep),minutes.push({date:minute,label:formatDate(minute,minutesFormat),selected:$timepicker.$date&&$timepicker.$isSelected(minute,1),disabled:$timepicker.$isDisabled(minute,1)});var second,seconds=[];for(i=0;i<options.length;i++)second=new Date(1970,0,1,0,0,viewDate.second-(midIndex-i)*options.secondStep),seconds.push({date:second,label:formatDate(second,secondsFormat),selected:$timepicker.$date&&$timepicker.$isSelected(second,2),disabled:$timepicker.$isDisabled(second,2)});var rows=[];for(i=0;i<options.length;i++)rows.push(showSeconds?[hours[i],minutes[i],seconds[i]]:[hours[i],minutes[i]]);scope.rows=rows,scope.showSeconds=showSeconds,scope.showAM=showAM,scope.isAM=($timepicker.$date||hours[midIndex].date).getHours()<12,scope.timeSeparator=timeSeparator,$timepicker.$isBuilt=!0},$timepicker.$isSelected=function(date,index){return $timepicker.$date?0===index?date.getHours()===$timepicker.$date.getHours():1===index?date.getMinutes()===$timepicker.$date.getMinutes():2===index?date.getSeconds()===$timepicker.$date.getSeconds():void 0:!1},$timepicker.$isDisabled=function(date,index){var selectedTime;return 0===index?selectedTime=date.getTime()+6e4*viewDate.minute+1e3*viewDate.second:1===index?selectedTime=date.getTime()+36e5*viewDate.hour+1e3*viewDate.second:2===index&&(selectedTime=date.getTime()+36e5*viewDate.hour+6e4*viewDate.minute),selectedTime<1*options.minTime||selectedTime>1*options.maxTime},scope.$arrowAction=function(value,index){"picker"===options.arrowBehavior?$timepicker.$setTimeByStep(value,index):$timepicker.$moveIndex(value,index)},$timepicker.$setTimeByStep=function(value,index){{var newDate=new Date($timepicker.$date),hours=newDate.getHours(),minutes=(formatDate(newDate,hoursFormat).length,newDate.getMinutes()),seconds=(formatDate(newDate,minutesFormat).length,newDate.getSeconds());formatDate(newDate,secondsFormat).length}0===index?newDate.setHours(hours-parseInt(options.hourStep,10)*value):1===index?newDate.setMinutes(minutes-parseInt(options.minuteStep,10)*value):2===index&&newDate.setSeconds(seconds-parseInt(options.secondStep,10)*value),$timepicker.select(newDate,index,!0)},$timepicker.$moveIndex=function(value,index){var targetDate;0===index?(targetDate=new Date(1970,0,1,viewDate.hour+value*options.length,viewDate.minute,viewDate.second),angular.extend(viewDate,{hour:targetDate.getHours()})):1===index?(targetDate=new Date(1970,0,1,viewDate.hour,viewDate.minute+value*options.length*options.minuteStep,viewDate.second),angular.extend(viewDate,{minute:targetDate.getMinutes()})):2===index&&(targetDate=new Date(1970,0,1,viewDate.hour,viewDate.minute,viewDate.second+value*options.length*options.secondStep),angular.extend(viewDate,{second:targetDate.getSeconds()})),$timepicker.$build()},$timepicker.$onMouseDown=function(evt){if("input"!==evt.target.nodeName.toLowerCase()&&evt.preventDefault(),evt.stopPropagation(),isTouch){var targetEl=angular.element(evt.target);"button"!==targetEl[0].nodeName.toLowerCase()&&(targetEl=targetEl.parent()),targetEl.triggerHandler("click")}},$timepicker.$onKeyDown=function(evt){if(/(38|37|39|40|13)/.test(evt.keyCode)&&!evt.shiftKey&&!evt.altKey){if(evt.preventDefault(),evt.stopPropagation(),13===evt.keyCode)return $timepicker.hide(!0);var newDate=new Date($timepicker.$date),hours=newDate.getHours(),hoursLength=formatDate(newDate,hoursFormat).length,minutes=newDate.getMinutes(),minutesLength=formatDate(newDate,minutesFormat).length,seconds=newDate.getSeconds(),secondsLength=formatDate(newDate,secondsFormat).length,sepLength=1,lateralMove=/(37|39)/.test(evt.keyCode),count=2+1*showSeconds+1*showAM;lateralMove&&(37===evt.keyCode?selectedIndex=1>selectedIndex?count-1:selectedIndex-1:39===evt.keyCode&&(selectedIndex=count-1>selectedIndex?selectedIndex+1:0));var selectRange=[0,hoursLength],incr=0;38===evt.keyCode&&(incr=-1),40===evt.keyCode&&(incr=1);var isSeconds=2===selectedIndex&&showSeconds,isMeridian=2===selectedIndex&&!showSeconds||3===selectedIndex&&showSeconds;0===selectedIndex?(newDate.setHours(hours+incr*parseInt(options.hourStep,10)),hoursLength=formatDate(newDate,hoursFormat).length,selectRange=[0,hoursLength]):1===selectedIndex?(newDate.setMinutes(minutes+incr*parseInt(options.minuteStep,10)),minutesLength=formatDate(newDate,minutesFormat).length,selectRange=[hoursLength+sepLength,minutesLength]):isSeconds?(newDate.setSeconds(seconds+incr*parseInt(options.secondStep,10)),secondsLength=formatDate(newDate,secondsFormat).length,selectRange=[hoursLength+sepLength+minutesLength+sepLength,secondsLength]):isMeridian&&(lateralMove||$timepicker.switchMeridian(),selectRange=[hoursLength+sepLength+minutesLength+sepLength+(secondsLength+sepLength)*showSeconds,2]),$timepicker.select(newDate,selectedIndex,!0),createSelection(selectRange[0],selectRange[1]),parentScope.$digest()}};var _init=$timepicker.init;$timepicker.init=function(){return isNative&&options.useNative?(element.prop("type","time"),void element.css("-webkit-appearance","textfield")):(isTouch&&(element.prop("type","text"),element.attr("readonly","true"),element.on("click",focusElement)),void _init())};var _destroy=$timepicker.destroy;$timepicker.destroy=function(){isNative&&options.useNative&&element.off("click",focusElement),_destroy()};var _show=$timepicker.show;$timepicker.show=function(){_show(),$timeout(function(){$timepicker.$element&&$timepicker.$element.on(isTouch?"touchstart":"mousedown",$timepicker.$onMouseDown),options.keyboard&&element&&element.on("keydown",$timepicker.$onKeyDown)},0,!1)};var _hide=$timepicker.hide;return $timepicker.hide=function(blur){$timepicker.$isShown&&($timepicker.$element&&$timepicker.$element.off(isTouch?"touchstart":"mousedown",$timepicker.$onMouseDown),options.keyboard&&element&&element.off("keydown",$timepicker.$onKeyDown),_hide(blur))},$timepicker}var isNative=(angular.element($window.document.body),/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent)),isTouch="createTouch"in $window.document&&isNative;return defaults.lang||(defaults.lang=$dateFormatter.getDefaultLocale()),timepickerFactory.defaults=defaults,timepickerFactory}]}).directive("bsTimepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$timepicker",function($window,$parse,$q,$dateFormatter,$dateParser,$timepicker){{var defaults=$timepicker.defaults,isNative=/(ip(a|o)d|iphone|android)/gi.test($window.navigator.userAgent);$window.requestAnimationFrame||$window.setTimeout}return{restrict:"EAC",require:"ngModel",link:function(scope,element,attr,controller){function validateAgainstMinMaxTime(parsedTime){if(angular.isDate(parsedTime)){var isMinValid=isNaN(options.minTime)||new Date(parsedTime.getTime()).setFullYear(1970,0,1)>=options.minTime,isMaxValid=isNaN(options.maxTime)||new Date(parsedTime.getTime()).setFullYear(1970,0,1)<=options.maxTime,isValid=isMinValid&&isMaxValid;controller.$setValidity("date",isValid),controller.$setValidity("min",isMinValid),controller.$setValidity("max",isMaxValid),isValid&&(controller.$dateValue=parsedTime)}}function getTimeFormattedString(){return!controller.$dateValue||isNaN(controller.$dateValue.getTime())?"":formatDate(controller.$dateValue,options.timeFormat)}var options={scope:scope,controller:controller};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","timeType","timeFormat","timezone","modelTimeFormat","useNative","hourStep","minuteStep","secondStep","length","arrowBehavior","iconUp","iconDown","roundDisplay","id","prefixClass","prefixEvent"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])});var falseValueRegExp=/^(false|0|)$/i;angular.forEach(["html","container","autoclose","useNative","roundDisplay"],function(key){angular.isDefined(attr[key])&&falseValueRegExp.test(attr[key])&&(options[key]=!1)}),attr.bsShow&&scope.$watch(attr.bsShow,function(newValue,oldValue){timepicker&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(/true|,?(timepicker),?/i)),newValue===!0?timepicker.show():timepicker.hide())}),isNative&&(options.useNative||defaults.useNative)&&(options.timeFormat="HH:mm");var timepicker=$timepicker(element,controller,options);options=timepicker.$options;var lang=options.lang,formatDate=function(date,format,timezone){return $dateFormatter.formatDate(date,format,lang,timezone)},dateParser=$dateParser({format:options.timeFormat,lang:lang});angular.forEach(["minTime","maxTime"],function(key){angular.isDefined(attr[key])&&attr.$observe(key,function(newValue){timepicker.$options[key]=dateParser.getTimeForAttribute(key,newValue),!isNaN(timepicker.$options[key])&&timepicker.$build(),validateAgainstMinMaxTime(controller.$dateValue)})}),scope.$watch(attr.ngModel,function(newValue,oldValue){timepicker.update(controller.$dateValue)},!0),controller.$parsers.unshift(function(viewValue){var date;if(!viewValue)return controller.$setValidity("date",!0),null;var parsedTime=angular.isDate(viewValue)?viewValue:dateParser.parse(viewValue,controller.$dateValue);return!parsedTime||isNaN(parsedTime.getTime())?void controller.$setValidity("date",!1):(validateAgainstMinMaxTime(parsedTime),"string"===options.timeType?(date=dateParser.timezoneOffsetAdjust(parsedTime,options.timezone,!0),formatDate(date,options.modelTimeFormat||options.timeFormat)):(date=dateParser.timezoneOffsetAdjust(controller.$dateValue,options.timezone,!0),"number"===options.timeType?date.getTime():"unix"===options.timeType?date.getTime()/1e3:"iso"===options.timeType?date.toISOString():new Date(date)))}),controller.$formatters.push(function(modelValue){var date;return date=angular.isUndefined(modelValue)||null===modelValue?0/0:angular.isDate(modelValue)?modelValue:"string"===options.timeType?dateParser.parse(modelValue,null,options.modelTimeFormat):new Date("unix"===options.timeType?1e3*modelValue:modelValue),controller.$dateValue=dateParser.timezoneOffsetAdjust(date,options.timezone),getTimeFormattedString()}),controller.$render=function(){element.val(getTimeFormattedString())},scope.$on("$destroy",function(){timepicker&&timepicker.destroy(),options=null,timepicker=null})}}}]),angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$bsTooltip",function(){var defaults=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"template/datetimepicker/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0,viewport:{selector:"body",padding:0}};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$sce","dimensions","$$rAF","$timeout",function($window,$rootScope,$compile,$q,$templateCache,$http,$animate,$sce,dimensions,$$rAF,$timeout){function TooltipFactory(element,config){function enterAnimateCallback(){scope.$emit(options.prefixEvent+".show",$tooltip)}function leaveAnimateCallback(){if(scope.$emit(options.prefixEvent+".hide",$tooltip),tipElement===_tipToHide){if(_blur&&"focus"===options.trigger)return element[0].blur();destroyTipElement()}}function bindTriggerEvents(){var triggers=options.trigger.split(" ");angular.forEach(triggers,function(trigger){"click"===trigger?element.on("click",$tooltip.toggle):"manual"!==trigger&&(element.on("hover"===trigger?"mouseenter":"focus",$tooltip.enter),element.on("hover"===trigger?"mouseleave":"blur",$tooltip.leave),"button"===nodeName&&"hover"!==trigger&&element.on(isTouch?"touchstart":"mousedown",$tooltip.$onFocusElementMouseDown))})}function unbindTriggerEvents(){for(var triggers=options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];"click"===trigger?element.off("click",$tooltip.toggle):"manual"!==trigger&&(element.off("hover"===trigger?"mouseenter":"focus",$tooltip.enter),element.off("hover"===trigger?"mouseleave":"blur",$tooltip.leave),"button"===nodeName&&"hover"!==trigger&&element.off(isTouch?"touchstart":"mousedown",$tooltip.$onFocusElementMouseDown))}}function bindKeyboardEvents(){"focus"!==options.trigger?tipElement.on("keyup",$tooltip.$onKeyUp):element.on("keyup",$tooltip.$onFocusKeyUp)}function unbindKeyboardEvents(){"focus"!==options.trigger?tipElement.off("keyup",$tooltip.$onKeyUp):element.off("keyup",$tooltip.$onFocusKeyUp)}function bindAutoCloseEvents(){$timeout(function(){tipElement.on("click",stopEventPropagation),$body.on("click",$tooltip.hide),_autoCloseEventsBinded=!0},0,!1)}function unbindAutoCloseEvents(){_autoCloseEventsBinded&&(tipElement.off("click",stopEventPropagation),$body.off("click",$tooltip.hide),_autoCloseEventsBinded=!1)}function stopEventPropagation(event){event.stopPropagation()}function getPosition($element){$element=$element||options.target||element;var el=$element[0],isBody="BODY"===el.tagName,elRect=el.getBoundingClientRect(),rect={};for(var p in elRect)rect[p]=elRect[p];null===rect.width&&(rect=angular.extend({},rect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top}));var elOffset=isBody?{top:0,left:0}:dimensions.offset(el),scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.prop("scrollTop")||0},outerDims=isBody?{width:document.documentElement.clientWidth,height:$window.innerHeight}:null;return angular.extend({},rect,scroll,outerDims,elOffset)}function getCalculatedOffset(placement,position,actualWidth,actualHeight){var offset,split=placement.split("-");switch(split[0]){case"right":offset={top:position.top+position.height/2-actualHeight/2,left:position.left+position.width};break;case"bottom":offset={top:position.top+position.height,left:position.left+position.width/2-actualWidth/2};break;case"left":offset={top:position.top+position.height/2-actualHeight/2,left:position.left-actualWidth};break;default:offset={top:position.top-actualHeight,left:position.left+position.width/2-actualWidth/2}}if(!split[1])return offset;if("top"===split[0]||"bottom"===split[0])switch(split[1]){case"left":offset.left=position.left;break;case"right":offset.left=position.left+position.width-actualWidth}else if("left"===split[0]||"right"===split[0])switch(split[1]){case"top":offset.top=position.top-actualHeight;break;case"bottom":offset.top=position.top+position.height}return offset}function applyPlacement(offset,placement){var tip=tipElement[0],width=tip.offsetWidth,height=tip.offsetHeight,marginTop=parseInt(dimensions.css(tip,"margin-top"),10),marginLeft=parseInt(dimensions.css(tip,"margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top=offset.top+marginTop,offset.left=offset.left+marginLeft,dimensions.setOffset(tip,angular.extend({using:function(props){tipElement.css({top:Math.round(props.top)+"px",left:Math.round(props.left)+"px",right:""})}},offset),0);var actualWidth=tip.offsetWidth,actualHeight=tip.offsetHeight;if("top"===placement&&actualHeight!==height&&(offset.top=offset.top+height-actualHeight),!/top-left|top-right|bottom-left|bottom-right/.test(placement)){var delta=getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);if(delta.left?offset.left+=delta.left:offset.top+=delta.top,dimensions.setOffset(tip,offset),/top|right|bottom|left/.test(placement)){var isVertical=/top|bottom/.test(placement),arrowDelta=isVertical?2*delta.left-width+actualWidth:2*delta.top-height+actualHeight,arrowOffsetPosition=isVertical?"offsetWidth":"offsetHeight";replaceArrow(arrowDelta,tip[arrowOffsetPosition],isVertical)}}}function getViewportAdjustedDelta(placement,position,actualWidth,actualHeight){var delta={top:0,left:0},$viewport=options.viewport&&findElement(options.viewport.selector||options.viewport);if(!$viewport)return delta;var viewportPadding=options.viewport&&options.viewport.padding||0,viewportDimensions=getPosition($viewport);if(/right|left/.test(placement)){var topEdgeOffset=position.top-viewportPadding-viewportDimensions.scroll,bottomEdgeOffset=position.top+viewportPadding-viewportDimensions.scroll+actualHeight;topEdgeOffset<viewportDimensions.top?delta.top=viewportDimensions.top-topEdgeOffset:bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height&&(delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset)}else{var leftEdgeOffset=position.left-viewportPadding,rightEdgeOffset=position.left+viewportPadding+actualWidth;leftEdgeOffset<viewportDimensions.left?delta.left=viewportDimensions.left-leftEdgeOffset:rightEdgeOffset>viewportDimensions.width&&(delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset)}return delta}function replaceArrow(delta,dimension,isHorizontal){var $arrow=findElement(".tooltip-arrow, .arrow",tipElement[0]);$arrow.css(isHorizontal?"left":"top",50*(1-delta/dimension)+"%").css(isHorizontal?"top":"left","")}function destroyTipElement(){clearTimeout(timeout),$tooltip.$isShown&&null!==tipElement&&(options.autoClose&&unbindAutoCloseEvents(),options.keyboard&&unbindKeyboardEvents()),tipScope&&(tipScope.$destroy(),tipScope=null),tipElement&&(tipElement.remove(),tipElement=$tooltip.$element=null)}var $tooltip={},nodeName=element[0].nodeName.toLowerCase(),options=$tooltip.$options=angular.extend({},defaults,config);$tooltip.$promise=fetchTemplate(options.template);var scope=$tooltip.$scope=options.scope&&options.scope.$new()||$rootScope.$new();if(options.delay&&angular.isString(options.delay)){var split=options.delay.split(",").map(parseFloat);options.delay=split.length>1?{show:split[0],hide:split[1]}:split[0]}$tooltip.$id=options.id||element.attr("id")||"",options.title&&(scope.title=$sce.trustAsHtml(options.title)),scope.$setEnabled=function(isEnabled){scope.$$postDigest(function(){$tooltip.setEnabled(isEnabled)})},scope.$hide=function(){scope.$$postDigest(function(){$tooltip.hide()})},scope.$show=function(){scope.$$postDigest(function(){$tooltip.show()})},scope.$toggle=function(){scope.$$postDigest(function(){$tooltip.toggle()})},$tooltip.$isShown=scope.$isShown=!1;var timeout,hoverState;options.contentTemplate&&($tooltip.$promise=$tooltip.$promise.then(function(template){var templateEl=angular.element(template);return fetchTemplate(options.contentTemplate).then(function(contentTemplate){var contentEl=findElement('[ng-bind="content"]',templateEl[0]);return contentEl.length||(contentEl=findElement('[ng-bind="title"]',templateEl[0])),contentEl.removeAttr("ng-bind").html(contentTemplate),templateEl[0].outerHTML})}));var tipLinker,tipElement,tipTemplate,tipContainer,tipScope;$tooltip.$promise.then(function(template){angular.isObject(template)&&(template=template.data),options.html&&(template=template.replace(htmlReplaceRegExp,'ng-bind-html="')),template=trim.apply(template),tipTemplate=template,tipLinker=$compile(template),$tooltip.init()}),$tooltip.init=function(){options.delay&&angular.isNumber(options.delay)&&(options.delay={show:options.delay,hide:options.delay}),"self"===options.container?tipContainer=element:angular.isElement(options.container)?tipContainer=options.container:options.container&&(tipContainer=findElement(options.container)),bindTriggerEvents(),options.target&&(options.target=angular.isElement(options.target)?options.target:findElement(options.target)),options.show&&scope.$$postDigest(function(){"focus"===options.trigger?element[0].focus():$tooltip.show()})},$tooltip.destroy=function(){unbindTriggerEvents(),destroyTipElement(),scope.$destroy()},$tooltip.enter=function(){return clearTimeout(timeout),hoverState="in",options.delay&&options.delay.show?void(timeout=setTimeout(function(){"in"===hoverState&&$tooltip.show()},options.delay.show)):$tooltip.show()},$tooltip.show=function(){if(options.bsEnabled&&!$tooltip.$isShown){scope.$emit(options.prefixEvent+".show.before",$tooltip);var parent,after;options.container?(parent=tipContainer,after=tipContainer[0].lastChild?angular.element(tipContainer[0].lastChild):null):(parent=null,after=element),tipElement&&destroyTipElement(),tipScope=$tooltip.$scope.$new(),tipElement=$tooltip.$element=tipLinker(tipScope,function(clonedElement,scope){}),tipElement.css({top:"-9999px",left:"-9999px",right:"auto",display:"block",visibility:"hidden"}),options.animation&&tipElement.addClass(options.animation),options.type&&tipElement.addClass(options.prefixClass+"-"+options.type),options.customClass&&tipElement.addClass(options.customClass),after?after.after(tipElement):parent.prepend(tipElement),$tooltip.$isShown=scope.$isShown=!0,safeDigest(scope),$tooltip.$applyPlacement(),angular.version.minor<=2?$animate.enter(tipElement,parent,after,enterAnimateCallback):$animate.enter(tipElement,parent,after).then(enterAnimateCallback),safeDigest(scope),$$rAF(function(){tipElement&&tipElement.css({visibility:"visible"})}),options.keyboard&&("focus"!==options.trigger&&$tooltip.focus(),bindKeyboardEvents()),options.autoClose&&bindAutoCloseEvents()}},$tooltip.leave=function(){return clearTimeout(timeout),hoverState="out",options.delay&&options.delay.hide?void(timeout=setTimeout(function(){"out"===hoverState&&$tooltip.hide()},options.delay.hide)):$tooltip.hide()};var _blur,_tipToHide;$tooltip.hide=function(blur){$tooltip.$isShown&&(scope.$emit(options.prefixEvent+".hide.before",$tooltip),_blur=blur,_tipToHide=tipElement,angular.version.minor<=2?$animate.leave(tipElement,leaveAnimateCallback):$animate.leave(tipElement).then(leaveAnimateCallback),$tooltip.$isShown=scope.$isShown=!1,safeDigest(scope),options.keyboard&&null!==tipElement&&unbindKeyboardEvents(),options.autoClose&&null!==tipElement&&unbindAutoCloseEvents())},$tooltip.toggle=function(){$tooltip.$isShown?$tooltip.leave():$tooltip.enter()},$tooltip.focus=function(){tipElement[0].focus()},$tooltip.setEnabled=function(isEnabled){options.bsEnabled=isEnabled},$tooltip.setViewport=function(viewport){options.viewport=viewport},$tooltip.$applyPlacement=function(){if(tipElement){var placement=options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||defaults.placement),tipElement.addClass(options.placement);var elementPosition=getPosition(),tipWidth=tipElement.prop("offsetWidth"),tipHeight=tipElement.prop("offsetHeight");if(autoPlace){var originalPlacement=placement,container=options.container?findElement(options.container):element.parent(),containerPosition=getPosition(container);originalPlacement.indexOf("bottom")>=0&&elementPosition.bottom+tipHeight>containerPosition.bottom?placement=originalPlacement.replace("bottom","top"):originalPlacement.indexOf("top")>=0&&elementPosition.top-tipHeight<containerPosition.top&&(placement=originalPlacement.replace("top","bottom")),("right"===originalPlacement||"bottom-left"===originalPlacement||"top-left"===originalPlacement)&&elementPosition.right+tipWidth>containerPosition.width?placement="right"===originalPlacement?"left":placement.replace("left","right"):("left"===originalPlacement||"bottom-right"===originalPlacement||"top-right"===originalPlacement)&&elementPosition.left-tipWidth<containerPosition.left&&(placement="left"===originalPlacement?"right":placement.replace("right","left")),tipElement.removeClass(originalPlacement).addClass(placement)}var tipPosition=getCalculatedOffset(placement,elementPosition,tipWidth,tipHeight);applyPlacement(tipPosition,placement)}},$tooltip.$onKeyUp=function(evt){27===evt.which&&$tooltip.$isShown&&($tooltip.hide(),evt.stopPropagation())},$tooltip.$onFocusKeyUp=function(evt){27===evt.which&&(element[0].blur(),evt.stopPropagation())},$tooltip.$onFocusElementMouseDown=function(evt){evt.preventDefault(),evt.stopPropagation(),$tooltip.$isShown?element[0].blur():element[0].focus()};var _autoCloseEventsBinded=!1;return $tooltip}function safeDigest(scope){scope.$$phase||scope.$root&&scope.$root.$$phase||scope.$digest()}function findElement(query,element){return angular.element((element||document).querySelectorAll(query))}function fetchTemplate(template){return fetchPromises[template]?fetchPromises[template]:fetchPromises[template]=$http.get(template,{cache:$templateCache}).then(function(res){return res.data})}var trim=String.prototype.trim,isTouch="createTouch"in $window.document,htmlReplaceRegExp=/ng-bind="/gi,$body=angular.element($window.document),fetchPromises={};return TooltipFactory}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function($window,$location,$sce,$tooltip,$$rAF){return{restrict:"EAC",scope:!0,link:function(scope,element,attr,transclusion){var options={scope:scope};angular.forEach(["template","contentTemplate","placement","container","delay","trigger","html","animation","backdropAnimation","type","customClass","id"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])});var falseValueRegExp=/^(false|0|)$/i;angular.forEach(["html","container"],function(key){angular.isDefined(attr[key])&&falseValueRegExp.test(attr[key])&&(options[key]=!1)});var dataTarget=element.attr("data-target");angular.isDefined(dataTarget)&&(falseValueRegExp.test(dataTarget)?options.target=!1:options.target=dataTarget),scope.hasOwnProperty("title")||(scope.title=""),attr.$observe("title",function(newValue){if(angular.isDefined(newValue)||!scope.hasOwnProperty("title")){var oldValue=scope.title;scope.title=$sce.trustAsHtml(newValue),angular.isDefined(oldValue)&&$$rAF(function(){tooltip&&tooltip.$applyPlacement()})}}),attr.bsTooltip&&scope.$watch(attr.bsTooltip,function(newValue,oldValue){angular.isObject(newValue)?angular.extend(scope,newValue):scope.title=newValue,angular.isDefined(oldValue)&&$$rAF(function(){tooltip&&tooltip.$applyPlacement()})},!0),attr.bsShow&&scope.$watch(attr.bsShow,function(newValue,oldValue){
tooltip&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(/true|,?(tooltip),?/i)),newValue===!0?tooltip.show():tooltip.hide())}),attr.bsEnabled&&scope.$watch(attr.bsEnabled,function(newValue,oldValue){tooltip&&angular.isDefined(newValue)&&(angular.isString(newValue)&&(newValue=!!newValue.match(/true|1|,?(tooltip),?/i)),tooltip.setEnabled(newValue===!1?!1:!0))}),attr.viewport&&scope.$watch(attr.viewport,function(newValue){tooltip&&angular.isDefined(newValue)&&tooltip.setViewport(newValue)});var tooltip=$tooltip(element,options);scope.$on("$destroy",function(){tooltip&&tooltip.destroy(),options=null,tooltip=null})}}}]),function(){"use strict";angular.module("ui.dialog",["ui.bootstrap.modal","ui.bootstrap.transition","ui.bootstrap.tpls"]).factory("$dialog",["$modal",function($modal){var _instance,_api={};return _api.open=function(options,flag){return _instance&&flag&&_instance.close(),_instance=$modal.open(options),_instance.result},_api.alert=function(title,message,acceptButtonLabel,cancelButtonLabel){return _api.open({backdrop:"static",size:"sm",template:'<div class="alert-dialog" ng-escape="cancel()">\n    <div class="modal-header">\n <h4 class="modal-title">{{title}}</h4>\n    </div>\n\n    <div class="modal-body" ng-bind-html="message">\n    </div>\n\n    <div class="modal-footer">\n        <button class="btn btn-link" ng-class="acceptButtonLabel ? \'btn-default\':\'btn-primary\'" ng-click="cancel()">\n            {{cancelButtonLabel}}\n        </button>\n        <button class="btn btn-primary" ng-click="accept()" ng-if="acceptButtonLabel">{{acceptButtonLabel}}\n        </button>\n    </div>\n</div>\n',controller:function($scope,$modalInstance){$scope.title=title,$scope.message=message,$scope.cancelButtonLabel=cancelButtonLabel||"Zamknij",$scope.acceptButtonLabel=acceptButtonLabel,$scope.cancel=function(){$modalInstance.dismiss(!1)},$scope.accept=function(){$modalInstance.close(!0)}}})},_api}]).factory("$ask",["$dialog","$translate","$format",function($dialog,$translate,$format){function ask(title,message){var params=Array.prototype.slice.call(arguments,1),acceptButtonLabel=$translate("Yes"),cancelButtonLabel=$translate("No");return message=$format.apply(null,params),title=$translate(title),$dialog.alert.call(null,title,message,acceptButtonLabel,cancelButtonLabel)}return ask}])}(),function(){"use strict";angular.module("ui.loadingbar",["ui.loadingBarInterceptor"]),angular.module("ui.loadingBarInterceptor",["ui.loadingBar"]).config(["$httpProvider",function($httpProvider){var interceptor=["$q","$cacheFactory","$timeout","$rootScope","$loadingBar",function($q,$cacheFactory,$timeout,$rootScope,$loadingBar){function setComplete(){$timeout.cancel(startTimeout),$loadingBar.complete(),reqsCompleted=0,reqsTotal=0}function isCached(config){var cache,defaultCache=$cacheFactory.get("$http"),defaults=$httpProvider.defaults;!config.cache&&!defaults.cache||config.cache===!1||"GET"!==config.method&&"JSONP"!==config.method||(cache=angular.isObject(config.cache)?config.cache:angular.isObject(defaults.cache)?defaults.cache:defaultCache);var cached=void 0!==cache?void 0!==cache.get(config.url):!1;return void 0!==config.cached&&cached!==config.cached?config.cached:(config.cached=cached,cached)}var startTimeout,reqsTotal=0,reqsCompleted=0,latencyThreshold=$loadingBar.latencyThreshold;return{request:function(config){return config.ignoreLoadingBar||isCached(config)||($rootScope.$broadcast("$loadingBar:loading",{url:config.url}),0===reqsTotal&&(startTimeout=$timeout(function(){$loadingBar.start()},latencyThreshold)),reqsTotal++,$loadingBar.set(reqsCompleted/reqsTotal)),config},response:function(response){return response.config.ignoreLoadingBar||isCached(response.config)||(reqsCompleted++,$rootScope.$broadcast("$loadingBar:loaded",{url:response.config.url}),reqsCompleted>=reqsTotal?setComplete():$loadingBar.set(reqsCompleted/reqsTotal)),response},responseError:function(rejection){return rejection.config.ignoreLoadingBar||isCached(rejection.config)||(reqsCompleted++,$rootScope.$broadcast("$loadingBar:loaded",{url:rejection.config.url}),reqsCompleted>=reqsTotal?setComplete():$loadingBar.set(reqsCompleted/reqsTotal)),$q.reject(rejection)}}}];$httpProvider.interceptors.push(interceptor)}]),angular.module("ui.loadingBar",[]).provider("$loadingBar",function(){this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function($injector,$document,$timeout,$rootScope){function _start(){$animate||($animate=$injector.get("$animate"));var $parent=$document.find($parentSelector).eq(0);$timeout.cancel(completeTimeout),started||($rootScope.$broadcast("$loadingBar.started"),started=!0,includeBar&&$animate.enter(loadingBarContainer,$parent),includeSpinner&&$animate.enter(spinner,$parent),_set(startSize))}function _set(n){if(started){var pct=100*n+"%";loadingBar.css("width",pct),status=n,$timeout.cancel(incTimeout),incTimeout=$timeout(function(){_inc()},250)}}function _inc(){if(!(_status()>=1)){var rnd=0,stat=_status();rnd=stat>=0&&.25>stat?(3*Math.random()+3)/100:stat>=.25&&.65>stat?3*Math.random()/100:stat>=.65&&.9>stat?2*Math.random()/100:stat>=.9&&.99>stat?.005:0;var pct=_status()+rnd;_set(pct)}}function _status(){return status}function _completeAnimation(){status=0,started=!1}function _complete(){$animate||($animate=$injector.get("$animate")),$rootScope.$broadcast("$loadingBar.completed"),_set(1),$timeout.cancel(completeTimeout),completeTimeout=$timeout(function(){var promise=$animate.leave(loadingBarContainer,_completeAnimation);promise&&promise.then&&promise.then(_completeAnimation),$animate.leave(spinner)},500)}var $animate,incTimeout,completeTimeout,$parentSelector=this.parentSelector,loadingBarContainer=angular.element(this.loadingBarTemplate),loadingBar=loadingBarContainer.find("div").eq(0),spinner=angular.element(this.spinnerTemplate),started=!1,status=0,includeSpinner=this.includeSpinner,includeBar=this.includeBar,startSize=this.startSize;return{start:_start,set:_set,status:_status,inc:_inc,complete:_complete,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),function(){"use strict";angular.module("ui.multiselect",["ng","ui.translate"]).run(["$rootScope","$translate",function($rootScope,$translate){$rootScope.multiSelectLabels={selectAll:$translate("selectAll"),selectNone:$translate("selectNone"),reset:$translate("reset"),search:$translate("search"),nothingSelected:$translate("nothingSelected")}}]).directive("multiSelect",["$sce","$timeout","$templateCache",function($sce,$timeout,$templateCache){return{restrict:"AE",scope:{inputModel:"=",outputModel:"=",isDisabled:"=",onClear:"&",onClose:"&",onSearchChange:"&",onItemClick:"&",onOpen:"&",onReset:"&",onSelectAll:"&",onSelectNone:"&",translation:"="},templateUrl:"isteven-multi-select.htm",link:function($scope,element,attrs){function genRandomString(length){for(var possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",temp="",i=0;length>i;i++)temp+=possible.charAt(Math.floor(Math.random()*possible.length));return temp}$scope.backUp=[],$scope.varButtonLabel="",$scope.spacingProperty="",$scope.indexProperty="",$scope.orientationH=!1,$scope.orientationV=!0,$scope.filteredModel=[],$scope.inputLabel={labelFilter:""},$scope.tabIndex=0,$scope.lang={},$scope.helperStatus={all:!0,none:!0,reset:!0,filter:!0};var prevTabIndex=0,helperItems=[],helperItemsLength=0,checkBoxLayer="",formElements=[],vMinSearchLength=0,clickedItem=null;$scope.clearClicked=function(e){$scope.inputLabel.labelFilter="",$scope.updateFilter(),$scope.select("clear",e)},$scope.numberToArray=function(num){return new Array(num)},$scope.searchChanged=function(){return $scope.inputLabel.labelFilter.length<vMinSearchLength&&$scope.inputLabel.labelFilter.length>0?!1:void $scope.updateFilter()},$scope.updateFilter=function(){$scope.filteredModel=[];var i=0;if("undefined"==typeof $scope.inputModel)return!1;for(i=$scope.inputModel.length-1;i>=0;i--){"undefined"!=typeof $scope.inputModel[i][attrs.groupProperty]&&$scope.inputModel[i][attrs.groupProperty]===!1&&$scope.filteredModel.push($scope.inputModel[i]);var gotData=!1;if("undefined"==typeof $scope.inputModel[i][attrs.groupProperty]){if("undefined"!=typeof attrs.searchProperty&&""!==attrs.searchProperty){for(var key in $scope.inputModel[i])if("boolean"!=typeof $scope.inputModel[i][key]&&String($scope.inputModel[i][key]).toUpperCase().indexOf($scope.inputLabel.labelFilter.toUpperCase())>=0&&attrs.searchProperty.indexOf(key)>-1){gotData=!0;break}}else for(var key in $scope.inputModel[i])if("boolean"!=typeof $scope.inputModel[i][key]&&String($scope.inputModel[i][key]).toUpperCase().indexOf($scope.inputLabel.labelFilter.toUpperCase())>=0){gotData=!0;break}gotData===!0&&$scope.filteredModel.push($scope.inputModel[i])}"undefined"!=typeof $scope.inputModel[i][attrs.groupProperty]&&$scope.inputModel[i][attrs.groupProperty]===!0&&("undefined"!=typeof $scope.filteredModel[$scope.filteredModel.length-1][attrs.groupProperty]&&$scope.filteredModel[$scope.filteredModel.length-1][attrs.groupProperty]===!1?$scope.filteredModel.pop():$scope.filteredModel.push($scope.inputModel[i]))}$scope.filteredModel.reverse(),$timeout(function(){if($scope.getFormElements(),$scope.inputLabel.labelFilter.length>vMinSearchLength){var filterObj=[];angular.forEach($scope.filteredModel,function(value,key){if("undefined"!=typeof value&&"undefined"==typeof value[attrs.groupProperty]){var tempObj=angular.copy(value),index=filterObj.push(tempObj);delete filterObj[index-1][$scope.indexProperty],delete filterObj[index-1][$scope.spacingProperty]}}),$scope.onSearchChange({data:{keyword:$scope.inputLabel.labelFilter,result:filterObj}})}},0)},$scope.getFormElements=function(){formElements=[];var selectButtons=[],inputField=[],checkboxes=[],clearButton=[];$scope.helperStatus.all||$scope.helperStatus.none||$scope.helperStatus.reset?(selectButtons=element.children().children().next().children().children()[0].getElementsByTagName("button"),$scope.helperStatus.filter&&(inputField=element.children().children().next().children().children().next()[0].getElementsByTagName("input"),clearButton=element.children().children().next().children().children().next()[0].getElementsByTagName("button"))):$scope.helperStatus.filter&&(inputField=element.children().children().next().children().children()[0].getElementsByTagName("input"),clearButton=element.children().children().next().children().children()[0].getElementsByTagName("button")),checkboxes=$scope.helperStatus.all||$scope.helperStatus.none||$scope.helperStatus.reset||$scope.helperStatus.filter?element.children().children().next().children().next()[0].getElementsByTagName("input"):element.children().children().next()[0].getElementsByTagName("input");for(var i=0;i<selectButtons.length;i++)formElements.push(selectButtons[i]);for(var i=0;i<inputField.length;i++)formElements.push(inputField[i]);for(var i=0;i<clearButton.length;i++)formElements.push(clearButton[i]);for(var i=0;i<checkboxes.length;i++)formElements.push(checkboxes[i])},$scope.isGroupMarker=function(item,type){return"undefined"!=typeof item[attrs.groupProperty]&&item[attrs.groupProperty]===type?!0:!1},$scope.removeGroupEndMarker=function(item){return"undefined"!=typeof item[attrs.groupProperty]&&item[attrs.groupProperty]===!1?!1:!0},$scope.syncItems=function(item,e,ng_repeat_index){if(e.preventDefault(),e.stopPropagation(),"undefined"!=typeof attrs.disableProperty&&item[attrs.disableProperty]===!0)return!1;if("undefined"!=typeof attrs.isDisabled&&$scope.isDisabled===!0)return!1;if("undefined"!=typeof item[attrs.groupProperty]&&item[attrs.groupProperty]===!1)return!1;var index=$scope.filteredModel.indexOf(item);if("undefined"!=typeof item[attrs.groupProperty]&&item[attrs.groupProperty]===!0){if("undefined"!=typeof attrs.selectionMode&&"SINGLE"===attrs.selectionMode.toUpperCase())return!1;var i,j,startIndex=0,endIndex=$scope.filteredModel.length-1,tempArr=[],nestLevel=0;for(i=index;i<$scope.filteredModel.length&&!(0===nestLevel&&i>index);i++)if("undefined"!=typeof $scope.filteredModel[i][attrs.groupProperty]&&$scope.filteredModel[i][attrs.groupProperty]===!0)0===tempArr.length&&(startIndex=i+1),nestLevel+=1;else if("undefined"!=typeof $scope.filteredModel[i][attrs.groupProperty]&&$scope.filteredModel[i][attrs.groupProperty]===!1){if(nestLevel-=1,tempArr.length>0&&0===nestLevel){var allTicked=!0;for(endIndex=i,j=0;j<tempArr.length;j++)if("undefined"!=typeof tempArr[j][$scope.tickProperty]&&tempArr[j][$scope.tickProperty]===!1){allTicked=!1;break}if(allTicked===!0)for(j=startIndex;endIndex>=j;j++)"undefined"==typeof $scope.filteredModel[j][attrs.groupProperty]&&("undefined"==typeof attrs.disableProperty?($scope.filteredModel[j][$scope.tickProperty]=!1,inputModelIndex=$scope.filteredModel[j][$scope.indexProperty],$scope.inputModel[inputModelIndex][$scope.tickProperty]=!1):$scope.filteredModel[j][attrs.disableProperty]!==!0&&($scope.filteredModel[j][$scope.tickProperty]=!1,inputModelIndex=$scope.filteredModel[j][$scope.indexProperty],$scope.inputModel[inputModelIndex][$scope.tickProperty]=!1));else for(j=startIndex;endIndex>=j;j++)"undefined"==typeof $scope.filteredModel[j][attrs.groupProperty]&&("undefined"==typeof attrs.disableProperty?($scope.filteredModel[j][$scope.tickProperty]=!0,inputModelIndex=$scope.filteredModel[j][$scope.indexProperty],$scope.inputModel[inputModelIndex][$scope.tickProperty]=!0):$scope.filteredModel[j][attrs.disableProperty]!==!0&&($scope.filteredModel[j][$scope.tickProperty]=!0,inputModelIndex=$scope.filteredModel[j][$scope.indexProperty],$scope.inputModel[inputModelIndex][$scope.tickProperty]=!0))}}else tempArr.push($scope.filteredModel[i])}else{if("undefined"!=typeof attrs.selectionMode&&"SINGLE"===attrs.selectionMode.toUpperCase()){for(i=0;i<$scope.filteredModel.length;i++)$scope.filteredModel[i][$scope.tickProperty]=!1;for(i=0;i<$scope.inputModel.length;i++)$scope.inputModel[i][$scope.tickProperty]=!1;$scope.filteredModel[index][$scope.tickProperty]=!0}else $scope.filteredModel[index][$scope.tickProperty]=!$scope.filteredModel[index][$scope.tickProperty];var inputModelIndex=$scope.filteredModel[index][$scope.indexProperty];$scope.inputModel[inputModelIndex][$scope.tickProperty]=$scope.filteredModel[index][$scope.tickProperty]}clickedItem=angular.copy(item),null!==clickedItem&&$timeout(function(){delete clickedItem[$scope.indexProperty],delete clickedItem[$scope.spacingProperty],$scope.onItemClick({data:clickedItem}),clickedItem=null},0),$scope.refreshOutputModel(),$scope.refreshButton(),prevTabIndex=$scope.tabIndex,$scope.tabIndex=ng_repeat_index+helperItemsLength,e.target.focus(),$scope.removeFocusStyle(prevTabIndex),$scope.setFocusStyle($scope.tabIndex),"undefined"!=typeof attrs.selectionMode&&"SINGLE"===attrs.selectionMode.toUpperCase()&&$scope.toggleCheckboxes(e)},$scope.refreshOutputModel=function(){$scope.outputModel=[];var outputProps=[],tempObj={};"undefined"!=typeof attrs.outputProperties?(outputProps=attrs.outputProperties.split(" "),angular.forEach($scope.inputModel,function(value,key){if("undefined"!=typeof value&&"undefined"==typeof value[attrs.groupProperty]&&value[$scope.tickProperty]===!0){tempObj={},angular.forEach(value,function(value1,key1){outputProps.indexOf(key1)>-1&&(tempObj[key1]=value1)});var index=$scope.outputModel.push(tempObj);delete $scope.outputModel[index-1][$scope.indexProperty],delete $scope.outputModel[index-1][$scope.spacingProperty]}})):angular.forEach($scope.inputModel,function(value,key){if("undefined"!=typeof value&&"undefined"==typeof value[attrs.groupProperty]&&value[$scope.tickProperty]===!0){var temp=angular.copy(value),index=$scope.outputModel.push(temp);delete $scope.outputModel[index-1][$scope.indexProperty],delete $scope.outputModel[index-1][$scope.spacingProperty]}})},$scope.refreshButton=function(){$scope.varButtonLabel="";var ctr=0;if(0===$scope.outputModel.length)$scope.varButtonLabel=$scope.lang.nothingSelected;else{var tempMaxLabels=$scope.outputModel.length;"undefined"!=typeof attrs.maxLabels&&""!==attrs.maxLabels&&(tempMaxLabels=attrs.maxLabels),$scope.outputModel.length>tempMaxLabels?$scope.more=!0:$scope.more=!1,angular.forEach($scope.inputModel,function(value,key){"undefined"!=typeof value&&value[attrs.tickProperty]===!0&&(tempMaxLabels>ctr&&($scope.varButtonLabel+=($scope.varButtonLabel.length>0?'</div>, <div class="buttonLabel">':'<div class="buttonLabel">')+$scope.writeLabel(value,"buttonLabel")),ctr++)}),$scope.more===!0&&(tempMaxLabels>0&&($scope.varButtonLabel+=", ... "),$scope.varButtonLabel+="("+$scope.outputModel.length+")")}$scope.varButtonLabel=$sce.trustAsHtml($scope.varButtonLabel+'<span class="caret"></span>')},$scope.itemIsDisabled=function(item){return"undefined"!=typeof attrs.disableProperty&&item[attrs.disableProperty]===!0?!0:$scope.isDisabled===!0?!0:!1},$scope.writeLabel=function(item,type){var temp=attrs[type].split(" "),label="";return angular.forEach(temp,function(value,key){item[value]&&(label+="&nbsp;"+value.split(".").reduce(function(prev,current){return prev[current]},item))}),"BUTTONLABEL"===type.toUpperCase()?label:$sce.trustAsHtml(label)},$scope.toggleCheckboxes=function(e){var clickedEl=element.children()[0];if(angular.element(document).off("click",$scope.externalClickListener),angular.element(document).off("keydown",$scope.keyboardListener),angular.element(checkBoxLayer).hasClass("show"))angular.element(checkBoxLayer).removeClass("show"),angular.element(clickedEl).removeClass("buttonClicked"),angular.element(document).off("click",$scope.externalClickListener),angular.element(document).off("keydown",$scope.keyboardListener),$scope.removeFocusStyle($scope.tabIndex),"undefined"!=typeof formElements[$scope.tabIndex]&&formElements[$scope.tabIndex].blur(),$timeout(function(){$scope.onClose()},0),element.children().children()[0].focus();else{$scope.inputLabel.labelFilter="",$scope.updateFilter(),helperItems=[],helperItemsLength=0,angular.element(checkBoxLayer).addClass("show"),angular.element(clickedEl).addClass("buttonClicked"),angular.element(document).on("click",$scope.externalClickListener),angular.element(document).on("keydown",$scope.keyboardListener),$scope.getFormElements(),$scope.tabIndex=0;var helperContainer=angular.element(element[0].querySelector(".helperContainer"))[0];if("undefined"!=typeof helperContainer){for(var i=0;i<helperContainer.getElementsByTagName("BUTTON").length;i++)helperItems[i]=helperContainer.getElementsByTagName("BUTTON")[i];helperItemsLength=helperItems.length+helperContainer.getElementsByTagName("INPUT").length}element[0].querySelector(".inputFilter")?(element[0].querySelector(".inputFilter").focus(),$scope.tabIndex=$scope.tabIndex+helperItemsLength-2,angular.element(element).children()[0].blur()):$scope.isDisabled||($scope.tabIndex=$scope.tabIndex+helperItemsLength,$scope.inputModel.length>0&&(formElements[$scope.tabIndex].focus(),$scope.setFocusStyle($scope.tabIndex),angular.element(element).children()[0].blur())),$scope.onOpen()}},$scope.externalClickListener=function(e){for(var targetsArr=element.find(e.target.tagName),i=0;i<targetsArr.length;i++)if(e.target==targetsArr[i])return;angular.element(checkBoxLayer.previousSibling).removeClass("buttonClicked"),angular.element(checkBoxLayer).removeClass("show"),angular.element(document).off("click",$scope.externalClickListener),angular.element(document).off("keydown",$scope.keyboardListener),$timeout(function(){$scope.onClose()},0),element.children().children()[0].focus()},$scope.select=function(type,e){var helperIndex=helperItems.indexOf(e.target);switch($scope.tabIndex=helperIndex,type.toUpperCase()){case"ALL":angular.forEach($scope.filteredModel,function(value,key){"undefined"!=typeof value&&value[attrs.disableProperty]!==!0&&"undefined"==typeof value[attrs.groupProperty]&&(value[$scope.tickProperty]=!0)}),$scope.refreshOutputModel(),$scope.refreshButton(),$scope.onSelectAll();break;case"NONE":angular.forEach($scope.filteredModel,function(value,key){"undefined"!=typeof value&&value[attrs.disableProperty]!==!0&&"undefined"==typeof value[attrs.groupProperty]&&(value[$scope.tickProperty]=!1)}),$scope.refreshOutputModel(),$scope.refreshButton(),$scope.onSelectNone();break;case"RESET":angular.forEach($scope.filteredModel,function(value,key){if("undefined"==typeof value[attrs.groupProperty]&&"undefined"!=typeof value&&value[attrs.disableProperty]!==!0){var temp=value[$scope.indexProperty];value[$scope.tickProperty]=$scope.backUp[temp][$scope.tickProperty]}}),$scope.refreshOutputModel(),$scope.refreshButton(),$scope.onReset();break;case"CLEAR":$scope.tabIndex=$scope.tabIndex+1,$scope.onClear();break;case"FILTER":$scope.tabIndex=helperItems.length-1}},$scope.prepareGrouping=function(){var spacing=0;angular.forEach($scope.filteredModel,function(value,key){value[$scope.spacingProperty]=spacing,value[attrs.groupProperty]===!0?spacing+=2:value[attrs.groupProperty]===!1&&(spacing-=2)})},$scope.prepareIndex=function(){var ctr=0;angular.forEach($scope.filteredModel,function(value,key){value[$scope.indexProperty]=ctr,ctr++})},$scope.keyboardListener=function(e){var key=e.keyCode?e.keyCode:e.which,isNavigationKey=!1;if(27===key)e.preventDefault(),e.stopPropagation(),$scope.toggleCheckboxes(e);else if(40===key||39===key||!e.shiftKey&&9==key)for(isNavigationKey=!0,prevTabIndex=$scope.tabIndex,$scope.tabIndex++,$scope.tabIndex>formElements.length-1&&($scope.tabIndex=0,prevTabIndex=formElements.length-1);formElements[$scope.tabIndex].disabled===!0&&($scope.tabIndex++,$scope.tabIndex>formElements.length-1&&($scope.tabIndex=0),$scope.tabIndex!==prevTabIndex););else if(38===key||37===key||e.shiftKey&&9==key)for(isNavigationKey=!0,prevTabIndex=$scope.tabIndex,$scope.tabIndex--,$scope.tabIndex<0&&($scope.tabIndex=formElements.length-1,prevTabIndex=0);formElements[$scope.tabIndex].disabled===!0&&($scope.tabIndex--,$scope.tabIndex!==prevTabIndex);)$scope.tabIndex<0&&($scope.tabIndex=formElements.length-1);if(isNavigationKey===!0){e.preventDefault(),formElements[$scope.tabIndex].focus();var actEl=document.activeElement;"CHECKBOX"===actEl.type.toUpperCase()?($scope.setFocusStyle($scope.tabIndex),$scope.removeFocusStyle(prevTabIndex)):($scope.removeFocusStyle(prevTabIndex),$scope.removeFocusStyle(helperItemsLength),$scope.removeFocusStyle(formElements.length-1))}isNavigationKey=!1},$scope.setFocusStyle=function(tabIndex){angular.element(formElements[tabIndex]).parent().parent().parent().addClass("multiSelectFocus")},$scope.removeFocusStyle=function(tabIndex){angular.element(formElements[tabIndex]).parent().parent().parent().removeClass("multiSelectFocus")},$scope.groupProperty=attrs.groupProperty,$scope.tickProperty=attrs.tickProperty,$scope.directiveId=attrs.directiveId;var tempStr=genRandomString(5);if($scope.indexProperty="idx_"+tempStr,$scope.spacingProperty="spc_"+tempStr,"undefined"!=typeof attrs.orientation&&("HORIZONTAL"===attrs.orientation.toUpperCase()?($scope.orientationH=!0,$scope.orientationV=!1):($scope.orientationH=!1,$scope.orientationV=!0)),checkBoxLayer=element.children().children().next()[0],"undefined"!=typeof attrs.maxHeight){var layer=element.children().children().children()[0];angular.element(layer).attr("style","height:"+attrs.maxHeight+"; overflow-y:scroll;")}for(var property in $scope.helperStatus)$scope.helperStatus.hasOwnProperty(property)&&"undefined"!=typeof attrs.helperElements&&-1===attrs.helperElements.toUpperCase().indexOf(property.toUpperCase())&&($scope.helperStatus[property]=!1);"undefined"!=typeof attrs.selectionMode&&"SINGLE"===attrs.selectionMode.toUpperCase()&&($scope.helperStatus.all=!1,$scope.helperStatus.none=!1),$scope.icon={},$scope.icon.selectAll="&#10003;",$scope.icon.selectNone="&times;",$scope.icon.reset="&#8630;",$scope.icon.tickMark='<i class="md md-done"></i>',"undefined"!=typeof attrs.translation?($scope.lang.selectAll=$sce.trustAsHtml($scope.icon.selectAll+"&nbsp;&nbsp;"+$scope.translation.selectAll),$scope.lang.selectNone=$sce.trustAsHtml($scope.icon.selectNone+"&nbsp;&nbsp;"+$scope.translation.selectNone),$scope.lang.reset=$sce.trustAsHtml($scope.icon.reset+"&nbsp;&nbsp;"+$scope.translation.reset),$scope.lang.search=$scope.translation.search,$scope.lang.nothingSelected=$sce.trustAsHtml($scope.translation.nothingSelected)):($scope.lang.selectAll=$sce.trustAsHtml($scope.icon.selectAll+"&nbsp;&nbsp;Select All"),$scope.lang.selectNone=$sce.trustAsHtml($scope.icon.selectNone+"&nbsp;&nbsp;Select None"),$scope.lang.reset=$sce.trustAsHtml($scope.icon.reset+"&nbsp;&nbsp;Reset"),$scope.lang.search="Search...",$scope.lang.nothingSelected="None Selected"),$scope.icon.tickMark=$sce.trustAsHtml($scope.icon.tickMark),"undefined"!=typeof attrs.MinSearchLength&&parseInt(attrs.MinSearchLength)>0&&(vMinSearchLength=Math.floor(parseInt(attrs.MinSearchLength))),$scope.$watch("inputModel",function(newVal){newVal&&($scope.refreshOutputModel(),$scope.refreshButton())},!0),$scope.$watch("inputModel",function(newVal){newVal&&($scope.backUp=angular.copy($scope.inputModel),$scope.updateFilter(),$scope.prepareGrouping(),$scope.prepareIndex(),$scope.refreshOutputModel(),$scope.refreshButton())}),$scope.$watch("isDisabled",function(newVal){$scope.isDisabled=newVal});var onTouchStart=function(e){$scope.$apply(function(){$scope.scrolled=!1})};angular.element(document).bind("touchstart",onTouchStart);var onTouchMove=function(e){$scope.$apply(function(){$scope.scrolled=!0})};angular.element(document).bind("touchmove",onTouchMove),$scope.$on("$destroy",function(){angular.element(document).unbind("touchstart",onTouchStart),angular.element(document).unbind("touchmove",onTouchMove)})}}}]).run(["$templateCache",function($templateCache){var template='<span class="multiSelect inlineBlock"><button id="{{directiveId}}" type="button"ng-click="toggleCheckboxes( $event ); refreshSelectedItems(); refreshButton(); prepareGrouping; prepareIndex();"ng-bind-html="varButtonLabel"ng-disabled="disable-button"></button><div class="checkboxLayer"><div class="helperContainer" ng-if="helperStatus.filter || helperStatus.all || helperStatus.none || helperStatus.reset "><div class="line" ng-if="helperStatus.all || helperStatus.none || helperStatus.reset "><button type="button" class="helperButton"ng-disabled="isDisabled"ng-if="helperStatus.all"ng-click="select( \'all\', $event );"ng-bind-html="lang.selectAll"></button><button type="button" class="helperButton"ng-disabled="isDisabled"ng-if="helperStatus.none"ng-click="select( \'none\', $event );"ng-bind-html="lang.selectNone"></button><button type="button" class="helperButton reset"ng-disabled="isDisabled"ng-if="helperStatus.reset"ng-click="select( \'reset\', $event );"ng-bind-html="lang.reset"></button></div><div class="line" style="position:relative" ng-if="helperStatus.filter"><input placeholder="{{lang.search}}" type="text"ng-click="select( \'filter\', $event )" ng-model="inputLabel.labelFilter" ng-change="searchChanged()" class="inputFilter"/><button type="button" class="clearButton" ng-click="clearClicked( $event )" ></button> </div> </div> <div class="checkBoxContainer"><div ng-repeat="item in filteredModel | filter:removeGroupEndMarker" class="multiSelectItem"ng-class="{selected: item[ tickProperty ], horizontal: orientationH, vertical: orientationV, multiSelectGroup:item[ groupProperty ], disabled:itemIsDisabled( item )}"ng-click="syncItems( item, $event, $index );" ng-mouseleave="removeFocusStyle( tabIndex );"> <div class="acol" ng-if="item[ spacingProperty ] > 0" ng-repeat="i in numberToArray( item[ spacingProperty ] ) track by $index"></div>  <div class="acol"><label><input class="checkbox focusable" type="checkbox" ng-disabled="itemIsDisabled( item )" ng-checked="item[ tickProperty ]" ng-click="syncItems( item, $event, $index )" /><span ng-class="{disabled:itemIsDisabled( item )}" ng-bind-html="writeLabel( item, \'itemLabel\' )"></span></label></div><span class="tickMark" ng-if="item[ groupProperty ] !== true && item[ tickProperty ] === true" ng-bind-html="icon.tickMark"></span></div></div></div></span>';$templateCache.put("isteven-multi-select.htm",template)}])}(),function(angular,factory){"use strict";return"function"==typeof define&&define.amd?void define(["angular"],function(angular){return factory(angular)}):factory(angular)}(angular||null,function(angular){"use strict";var app=angular.module("ngTable",[]);return app.value("ngTableDefaults",{params:{},settings:{}}),app.factory("NgTableParams",["$q","$log","ngTableDefaults",function($q,$log,ngTableDefaults){var isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},NgTableParams=function(baseParameters,baseSettings){var self=this,log=function(){settings.debugMode&&$log.debug&&$log.debug.apply(this,arguments)};this.data=[],this.parameters=function(newParameters,parseParamsFromUrl){if(parseParamsFromUrl=parseParamsFromUrl||!1,angular.isDefined(newParameters)){for(var key in newParameters){var value=newParameters[key];if(parseParamsFromUrl&&key.indexOf("[")>=0){for(var keys=key.split(/\[(.*)\]/).reverse(),lastKey="",i=0,len=keys.length;len>i;i++){var name=keys[i];if(""!==name){var v=value;value={},value[lastKey=name]=isNumber(v)?parseFloat(v):v}}"sorting"===lastKey&&(params[lastKey]={}),params[lastKey]=angular.extend(params[lastKey]||{},value[lastKey])}else params[key]=isNumber(newParameters[key])?parseFloat(newParameters[key]):newParameters[key]}return log("ngTable: set parameters",params),this}return params},this.settings=function(newSettings){return angular.isDefined(newSettings)?(angular.isArray(newSettings.data)&&(newSettings.total=newSettings.data.length),settings=angular.extend(settings,newSettings),log("ngTable: set settings",settings),this):settings},this.page=function(page){return angular.isDefined(page)?this.parameters({page:page}):params.page},this.total=function(total){return angular.isDefined(total)?this.settings({total:total}):settings.total},this.count=function(count){return angular.isDefined(count)?this.parameters({count:count,page:1}):params.count},this.filter=function(filter){return angular.isDefined(filter)?this.parameters({filter:filter,page:1}):params.filter},this.sorting=function(sorting){if(2==arguments.length){var sortArray={};return sortArray[sorting]=arguments[1],this.parameters({sorting:sortArray}),this}return angular.isDefined(sorting)?this.parameters({sorting:sorting}):params.sorting},this.isSortBy=function(field,direction){return angular.isDefined(params.sorting[field])&&angular.equals(params.sorting[field],direction)},this.orderBy=function(){var sorting=[];for(var column in params.sorting)sorting.push(("asc"===params.sorting[column]?"+":"-")+column);return sorting},this.getData=function($defer,params){return $defer.resolve(angular.isArray(this.data)&&angular.isObject(params)?this.data.slice((params.page()-1)*params.count(),params.page()*params.count()):[]),$defer.promise},this.getGroups=function($defer,column){var defer=$q.defer();return defer.promise.then(function(data){var groups={};angular.forEach(data,function(item){var groupName=angular.isFunction(column)?column(item):item[column];groups[groupName]=groups[groupName]||{data:[]},groups[groupName].value=groupName,groups[groupName].data.push(item)});var result=[];for(var i in groups)result.push(groups[i]);log("ngTable: refresh groups",result),$defer.resolve(result)}),this.getData(defer,self)},this.generatePagesArray=function(currentPage,totalItems,pageSize){var maxBlocks,maxPage,maxPivotPages,minPage,numPages,pages;if(maxBlocks=6,pages=[],numPages=Math.ceil(totalItems/pageSize),numPages>1){pages.push({type:"prev",number:Math.max(1,currentPage-1),active:currentPage>1}),pages.push({type:"first",number:1,active:currentPage>1,
current:1===currentPage}),maxPivotPages=Math.round((maxBlocks-5)/2),minPage=Math.max(2,currentPage-maxPivotPages),maxPage=Math.min(numPages-1,currentPage+2*maxPivotPages-(currentPage-minPage)),minPage=Math.max(2,minPage-(2*maxPivotPages-(maxPage-minPage)));for(var i=minPage;maxPage>=i;)pages.push(i===minPage&&2!==i||i===maxPage&&i!==numPages-1?{type:"more",active:!1}:{type:"page",number:i,active:currentPage!==i,current:currentPage===i}),i++;pages.push({type:"last",number:numPages,active:currentPage!==numPages,current:currentPage===numPages}),pages.push({type:"next",number:Math.min(numPages,currentPage+1),active:numPages>currentPage})}return pages},this.url=function(asString){asString=asString||!1;var pairs=asString?[]:{};for(var key in params)if(params.hasOwnProperty(key)){var item=params[key],name=encodeURIComponent(key);if("object"==typeof item){for(var subkey in item)if(!angular.isUndefined(item[subkey])&&""!==item[subkey]){var pname=name+"["+encodeURIComponent(subkey)+"]";asString?pairs.push(pname+"="+item[subkey]):pairs[pname]=item[subkey]}}else angular.isFunction(item)||angular.isUndefined(item)||""===item||(asString?pairs.push(name+"="+encodeURIComponent(item)):pairs[name]=encodeURIComponent(item))}return pairs},this.reload=function(){var $defer=$q.defer(),self=this,pData=null;if(settings.$scope)return settings.$loading=!0,pData=settings.groupBy?settings.getGroups($defer,settings.groupBy,this):settings.getData($defer,this),log("ngTable: reload data"),pData||(pData=$defer.promise),pData.then(function(data){return settings.$loading=!1,log("ngTable: current scope",settings.$scope),settings.groupBy?(self.data=data,settings.$scope&&(settings.$scope.$groups=data)):(self.data=data,settings.$scope&&(settings.$scope.$data=data)),settings.$scope&&(settings.$scope.pages=self.generatePagesArray(self.page(),self.total(),self.count())),settings.$scope.$emit("ngTableAfterReloadData"),data})},this.reloadPages=function(){var self=this;settings.$scope.pages=self.generatePagesArray(self.page(),self.total(),self.count())};var params=this.$params={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null};angular.extend(params,ngTableDefaults.params);var settings={$scope:null,$loading:!1,data:null,total:0,defaultSort:"desc",filterDelay:750,counts:[10,25,50,100],sortingIndicator:"span",getGroups:this.getGroups,getData:this.getData};return angular.extend(settings,ngTableDefaults.settings),this.settings(baseSettings),this.parameters(baseParameters,!0),this};return NgTableParams}]),app.factory("ngTableParams",["NgTableParams",function(NgTableParams){return NgTableParams}]),app.controller("ngTableController",["$scope","NgTableParams","$timeout","$parse","$compile","$attrs","$element","ngTableColumn",function($scope,NgTableParams,$timeout,$parse,$compile,$attrs,$element,ngTableColumn){function resetPage(){$scope.params.$params.page=1}var isFirstTimeLoad=!0;$scope.$filterRow={},$scope.$loading=!1,$scope.hasOwnProperty("params")||($scope.params=new NgTableParams,$scope.params.isNullInstance=!0),$scope.params.settings().$scope=$scope;var delayFilter=function(){var timer=0;return function(callback,ms){$timeout.cancel(timer),timer=$timeout(callback,ms)}}();$scope.$watch("params.$params",function(newParams,oldParams){if(newParams!==oldParams){if($scope.params.settings().$scope=$scope,angular.equals(newParams.filter,oldParams.filter))$scope.params.reload();else{var maybeResetPage=isFirstTimeLoad?angular.noop:resetPage;delayFilter(function(){maybeResetPage(),$scope.params.reload()},$scope.params.settings().filterDelay)}$scope.params.isNullInstance||(isFirstTimeLoad=!1)}},!0),this.getParams=function(){return $scope.params},this.compileDirectiveTemplates=function(){if(!$element.hasClass("ng-table")){$scope.templates={header:$attrs.templateHeader?$attrs.templateHeader:"ng-table/header.html",pagination:$attrs.templatePagination?$attrs.templatePagination:"ng-table/pager.html"},$element.addClass("ng-table");var headerTemplate=null;0===$element.find("> thead").length&&(headerTemplate=angular.element(document.createElement("thead")).attr("ng-include","templates.header"),$element.prepend(headerTemplate));var paginationTemplate=angular.element(document.createElement("div")).attr({"ng-table-pagination":"params","template-url":"templates.pagination"});$element.after(paginationTemplate),headerTemplate&&$compile(headerTemplate)($scope),$compile(paginationTemplate)($scope)}},this.loadFilterData=function($columns){angular.forEach($columns,function($column){var def;return def=$column.filterData($scope,{$column:$column}),def?angular.isObject(def)&&angular.isObject(def.promise)?(delete $column.filterData,def.promise.then(function(data){angular.isArray(data)||angular.isFunction(data)||angular.isObject(data)?angular.isArray(data)&&data.unshift({title:"-",id:""}):data=[],$column.data=data})):$column.data=def:void delete $column.filterData})},this.buildColumns=function(columns){return columns.map(function(col){return ngTableColumn.buildColumn(col,$scope)})},this.setupBindingsToInternalScope=function(tableParamsExpr){var tableParamsGetter=$parse(tableParamsExpr);$scope.$watch(tableParamsGetter,function(params){angular.isUndefined(params)||($scope.paramsModel=tableParamsGetter,$scope.params=params)},!1),$attrs.showFilter&&$scope.$parent.$watch($attrs.showFilter,function(value){$scope.show_filter=value}),$attrs.disableFilter&&$scope.$parent.$watch($attrs.disableFilter,function(value){$scope.$filterRow.disabled=value})},$scope.sortBy=function($column,event){var parsedSortable=$column.sortable&&$column.sortable();if(parsedSortable){var defaultSort=$scope.params.settings().defaultSort,inverseSort="asc"===defaultSort?"desc":"asc",sorting=$scope.params.sorting()&&$scope.params.sorting()[parsedSortable]&&$scope.params.sorting()[parsedSortable]===defaultSort,sortingParams=event.ctrlKey||event.metaKey?$scope.params.sorting():{};sortingParams[parsedSortable]=sorting?inverseSort:defaultSort,$scope.params.parameters({sorting:sortingParams})}}}]),app.factory("ngTableColumn",[function(){function buildColumn(column,defaultScope){var extendedCol=Object.create(column);for(var prop in defaults)void 0===extendedCol[prop]&&(extendedCol[prop]=defaults[prop]),angular.isFunction(extendedCol[prop])||!function(prop1){extendedCol[prop1]=function(){return column[prop1]}}(prop),function(prop1){var getterFn=extendedCol[prop1];extendedCol[prop1]=function(){return 0===arguments.length?getterFn.call(column,defaultScope):getterFn.apply(column,arguments)}}(prop);return extendedCol}var defaults={"class":function(){return""},filter:function(){return!1},filterData:angular.noop,headerTemplateURL:function(){return!1},headerTitle:function(){return" "},sortable:function(){return!1},show:function(){return!0},title:function(){return" "},titleAlt:function(){return""}};return{buildColumn:buildColumn}}]),app.directive("ngTable",["$q","$parse",function($q,$parse){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(element){var columns=[],i=0,row=null;return angular.forEach(angular.element(element.find("tr")),function(tr){tr=angular.element(tr),tr.hasClass("ng-table-group")||row||(row=tr)}),row?(angular.forEach(row.find("td"),function(item){var el=angular.element(item);if(!el.attr("ignore-cell")||"true"!==el.attr("ignore-cell")){var getAttrValue=function(attr){return el.attr("x-data-"+attr)||el.attr("data-"+attr)||el.attr(attr)},parsedAttribute=function(attr){var expr=getAttrValue(attr);return expr?function(scope,locals){return $parse(expr)(scope,angular.extend(locals||{},{$columns:columns}))}:void 0},titleExpr=getAttrValue("title-alt")||getAttrValue("title");titleExpr&&el.attr("data-title-text","{{"+titleExpr+"}}"),columns.push({id:i++,title:parsedAttribute("title"),titleAlt:parsedAttribute("title-alt"),headerTitle:parsedAttribute("header-title"),sortable:parsedAttribute("sortable"),"class":parsedAttribute("header-class"),filter:parsedAttribute("filter"),headerTemplateURL:parsedAttribute("header"),filterData:parsedAttribute("filter-data"),show:el.attr("ng-show")?function(scope){return $parse(el.attr("ng-show"))(scope)}:void 0})}}),function(scope,element,attrs,controller){scope.$columns=columns=controller.buildColumns(columns),controller.setupBindingsToInternalScope(attrs.ngTable),controller.loadFilterData(columns),controller.compileDirectiveTemplates()}):void 0}}}]),app.directive("ngTableSortHeader",function(){return{scope:{ngTableSortHeader:"@"},restrict:"AE",require:"^ngTable",transclude:!0,replace:!0,link:function(scope,element,attrs,ngTable){var tableParams=ngTable.getParams();scope.$watch(function(){return ngTable.getParams()},function(params){tableParams=params}),scope.isSortBy=function(order){return tableParams.isSortBy(scope.ngTableSortHeader,order)},scope.sorting=function(){var sort={};sort[scope.ngTableSortHeader]=scope.isSortBy("asc")?"desc":"asc",tableParams.sorting(sort)}},template:"<th class=\"sortable\"\n    ng-class=\"{'sort-asc': isSortBy('asc'), 'sort-desc': isSortBy('desc')}\"\n    ng-click=\"sorting()\">\n    <div class=\"sort-indicator\" ng-transclude>\n        \n    </div>\n</th>"}}),app.directive("ngTableDynamic",["$parse",function($parse){function parseDirectiveExpression(attr){if(!attr||attr.indexOf(" with ")>-1){var parts=attr.split(/\s+with\s+/);return{tableParams:parts[0],columns:parts[1]}}throw new Error("Parse error (expected example: ng-table-dynamic='tableParams with cols')")}return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(tElement){var row;return angular.forEach(angular.element(tElement.find("tr")),function(tr){tr=angular.element(tr),tr.hasClass("ng-table-group")||row||(row=tr)}),row?(angular.forEach(row.find("td"),function(item){var el=angular.element(item),getAttrValue=function(attr){return el.attr("x-data-"+attr)||el.attr("data-"+attr)||el.attr(attr)},titleExpr=getAttrValue("title");titleExpr||el.attr("data-title-text","{{$columns[$index].titleAlt(this) || $columns[$index].title(this)}}");var showExpr=el.attr("ng-show");showExpr||el.attr("ng-show","$columns[$index].show(this)")}),function(scope,element,attrs,controller){var expr=parseDirectiveExpression(attrs.ngTableDynamic),columns=$parse(expr.columns)(scope)||[];scope.$columns=controller.buildColumns(columns),controller.setupBindingsToInternalScope(expr.tableParams),controller.loadFilterData(scope.$columns),controller.compileDirectiveTemplates()}):void 0}}}]),app.directive("ngTablePagination",["$compile",function($compile){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(scope,element,attrs){scope.params.settings().$scope.$on("ngTableAfterReloadData",function(){scope.pages=scope.params.generatePagesArray(scope.params.page(),scope.params.total(),scope.params.count())},!0),scope.$watch("templateUrl",function(templateUrl){if(!angular.isUndefined(templateUrl)){var template=angular.element(document.createElement("div"));template.attr({"ng-include":"templateUrl"}),element.append(template),$compile(template)(scope)}})}}}]),angular.module("ngTable").run(["$templateCache",function($templateCache){$templateCache.put("ng-table/filters/select-multiple.html",'<select ng-options="data.id as data.title for data in $column.data" ng-disabled="$filterRow.disabled" multiple ng-multiple="true" ng-model="params.filter()[name]" ng-show="filter==\'select-multiple\'" class="filter filter-select-multiple form-control" name="{{name}}"> </select>'),$templateCache.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in $column.data" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" ng-show="filter==\'select\'" class="filter filter-select form-control" name="{{name}}"> </select>'),$templateCache.put("ng-table/filters/text.html",'<input type="text" name="{{name}}" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" ng-if="filter==\'text\'" class="input-filter form-control"/>'),$templateCache.put("ng-table/header.html",'<tr> <th title="{{$column.headerTitle(this)}}" ng-repeat="$column in $columns" ng-class="{ \'sortable\': $column.sortable(this), \'sort-asc\': params.sorting()[$column.sortable(this)]==\'asc\', \'sort-desc\': params.sorting()[$column.sortable(this)]==\'desc\' }" ng-click="sortBy($column, $event)" ng-show="$column.show(this)" ng-init="template=$column.headerTemplateURL(this)" class="header {{$column.class(this)}}"> <div ng-if="!template" ng-show="!template" class="ng-table-header" ng-class="{\'sort-indicator\': params.settings().sortingIndicator==\'div\'}"> <span ng-bind="$column.title(this)" ng-class="{\'sort-indicator\': params.settings().sortingIndicator==\'span\'}"></span> </div> <div ng-if="template" ng-show="template" ng-include="template"></div> </th> </tr> <tr ng-show="show_filter" class="ng-table-filters"> <th data-title-text="{{$column.titleAlt(this) || $column.title(this)}}" ng-repeat="$column in $columns" ng-show="$column.show(this)" class="filter"> <div ng-repeat="(name, filter) in $column.filter(this)"> <div ng-if="filter.indexOf(\'/\') !==-1" ng-include="filter"></div> <div ng-if="filter.indexOf(\'/\')===-1" ng-include="\'ng-table/filters/\' + filter + \'.html\'"></div> </div> </th> </tr> '),$templateCache.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager" ng-if="params.data.length">\n  <ul ng-if="params.settings().counts.length" class="ng-table-counts pagination pull-right">\n    <li ng-repeat="count in params.settings().counts"\n        ng-class="{\'active\':params.count()==count}"\n        ng-click="params.count(count)">\n      <a href="" ng-bind="count"></a>\n    </li>\n  </ul>\n\n  <ul class="pagination ng-table-pagination">\n    <li ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}"\n        ng-repeat="page in pages"\n        ng-switch="page.type">\n      <a ng-switch-when="prev" ng-click="params.page(page.number)" href=""><i class="md md-chevron-left"></i></a>\n      <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a>\n      <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a>\n      <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a>\n      <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a>\n      <a ng-switch-when="next" ng-click="params.page(page.number)" href=""><i class="md md-chevron-right"></i></a>\n    </li>\n  </ul>\n</div> ')}]),app}),function(){"use strict";angular.module("ui.organisation",[]).factory("Tree",function(){function Tree(structure){forEach(structure,function(node){for(var i=0;node.children&&i<node.children.length;i++)node.children[i].parent=node}),this.structure=structure}function shallowCopy(src,dst){if(angular.isArray(src)){dst=dst||[];for(var i=0;i<src.length;i++)dst[i]=src[i]}else if(angular.isObject(src)){dst=dst||{};for(var key in src)!src.hasOwnProperty(key)||"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key])}return dst||src}function forEach(node,callback){var result=null;if(node){if("function"==typeof callback&&callback(node),null!=node.children)for(var i=0;null===result&&i<node.children.length;i++)result=forEach(node.children[i],callback);return result}}function forEachParent(node,callback){var current=node;if(node)for(;current.parent;)current=current.parent,"function"==typeof callback&&callback(current)}function searchNode(node,text){var child,result=null,children=[],regex=new RegExp(text,"i");if(node){if(null!=node.children)for(var i=0;i<node.children.length;i++)child=searchNode(node.children[i],text),null!==child&&children.push(child);return(node.name.match(regex)||children.length)&&(result=shallowCopy(node),result.expanded=!0,children.length&&(result.children=children)),result}}function getFirstNode(node,text){var result=null,regex=new RegExp(text,"i");if(!node)return null;if(node.name.match(regex))return node;if(null!=node.children)for(var i=0;null===result&&i<node.children.length;i++)result=getFirstNode(node.children[i],text);return result}function toArray(node,level){var result,child;if(node){if(result=[node],null!=node.children)for(var i=0;i<node.children.length;i++)child=toArray(node.children[i],level+1),null!==child&&(result=result.concat(child));return result}}return Tree.fromOrganisation=function(organisation){function convertUser(userName){return{name:userName,type:"user"}}function convertGroup(group){var node={type:"group",name:group.name,children:[]};return angular.forEach(group.groups,function(item,name){node.children.push(convertGroup(item))}),angular.forEach(group.users,function(item,name){node.children.push(convertUser(item))}),node}function convertGroups(groupsArray){var nodes=[];return angular.forEach(groupsArray,function(group){nodes.push(convertGroup(group))}),nodes}var tree;return tree={type:"root",name:"Hierarchies",expanded:!0,children:[]},angular.forEach(organisation,function(hierarchy){tree.children.push({type:"hierarchy",children:convertGroups(hierarchy.groups),name:hierarchy.name})}),new Tree(tree)},Tree.prototype.search=function(text){return text?searchNode(this.structure,text):this.structure},Tree.prototype.toArray=function(){return toArray(this.structure,0)},Tree.prototype.getNodeInGroup=function(hierarchyName,groupName,nodeName){var hierarchy=getFirstNode(this.structure,hierarchyName),group=getFirstNode(hierarchy,groupName),node=getFirstNode(group,nodeName);return forEachParent(node||group||hierarchy,function(node){node.expanded=!0}),node||group||hierarchy},Tree}).directive("selectOrganisation",["Tree",function(Tree){return{restrict:"AE",require:["ngModel","^form"],scope:{assignee:"=ngModel",organisation:"=selectOrganisation",ngDisabled:"=",requiredSelection:"@"},link:function(scope,element,attrs,controllers){var ngModelController=controllers[0],formController=controllers[1],requiredFields=scope.requiredSelection?scope.requiredSelection.split(","):[];scope.$watch("assignee",function(newValue,oldValue){var valid=!0;requiredFields.length&&(angular.forEach(requiredFields,function(fieldName){newValue&&newValue[fieldName]||(valid=!1)}),ngModelController.$setValidity("required",valid)),newValue!==oldValue&&ngModelController.$setDirty()}),element.bind("keydown",function(e){/(40|32)/.test(e.which)&&(e.preventDefault(),e.stopPropagation(),scope.isDropdownOpen||scope.$apply(function(){scope.isDropdownOpen=!0}))}),formController.$addControl(ngModelController)},controller:["$scope","$element",function($scope,$element){function onDblClick(node){$scope.isDropdownOpen=!1}function getIconClass(node){return"user"===node.type?"md md-person":"root"===node.type?"md md-home":"md md-group-work"}var tree,selectedNode;$element.find("input").bind("click",function(evt){evt.preventDefault(),evt.stopPropagation()}),$scope.searchTree=function(){$scope.tree=tree.search($scope.search)},$scope.$watch("organisation",function(value){value&&(tree=Tree.fromOrganisation(value),$scope.searchTree(),$scope.assignee&&(selectedNode=tree.getNodeInGroup($scope.assignee.hierarchy,$scope.assignee.group,$scope.assignee.user),selectedNode&&(selectedNode.selected=!0)))}),$scope.options={collapsible:!0,showRoot:!1,getIconClass:getIconClass,nodeClassProperty:"type",displayProperty:"name",onDblClick:onDblClick}}],templateUrl:"template/organisation/select-organisation.tpl.html"}}]).value("treeViewDefaults",{iconClassProperty:"type",displayProperty:"name",collapsible:!0}).directive("treeView",["$q","treeViewDefaults","Tree",function($q,treeViewDefaults,Tree){return{restrict:"EA",scope:{treeView:"=",treeViewOptions:"=",ngModel:"="},replace:!0,template:'<div class="tree"><div tree-view-node="treeView" tabindex="-1"></div></div>',controller:["$scope","$element",function($scope,$element){var selectedNode,options,self=this,nodes=new Tree($scope.treeView).toArray();options=angular.extend({},treeViewDefaults,$scope.treeViewOptions),$scope.$watch("treeViewOptions",function(treeViewOptions){angular.extend(options,treeViewOptions)}),this.selectNode=function(node){selectedNode=node,"function"==typeof options.onNodeSelect&&options.onNodeSelect(node),self.updateModel(node)},this.dblClicked=function(node){"function"==typeof options.onDblClick&&options.onDblClick(node)},this.updateModel=function(node){var current,model={};for(model.user="user"===node.type?node.name:null,model.group="group"===node.type?node.name:node.parent&&"group"===node.parent.type?node.parent.name:null,current=node;current&&"hierarchy"!==current.type;)current=current.parent;model.hierarchy=current&&current.name,$scope.ngModel=model},this.isSelected=function(node){return node===selectedNode},this.getOptions=function(){return options},this.selectNextNode=function(){var index=nodes.indexOf(selectedNode);index<nodes.length-1&&self.selectNode(nodes[index+1])},this.selectPreviousNode=function(){var index=nodes.indexOf(selectedNode);index>0&&self.selectNode(nodes[index-1])},$element.bind("keydown",function(e){/(38|40|13)/.test(e.which)&&(e.preventDefault(),e.stopPropagation(),$scope.$apply(function(){switch(e.keyCode){case 13:self.dblClicked();break;case 40:self.selectNextNode();break;case 38:self.selectPreviousNode()}}))})}]}}]).directive("treeViewNode",["$q","$compile",function($q,$compile){return{restrict:"A",require:"^treeView",scope:{node:"=treeViewNode"},link:function(scope,element,attrs,controller){var template,options=controller.getOptions();scope.$watch("node",function(node){node&&(scope.expanded=node.expanded||options.collapsible===!1,angular.forEach(node.children,function(child){child.parent=scope.node}),node.selected&&controller.selectNode(node,element))}),scope.getIconClass="function"==typeof options.getIconClass?options.getIconClass:function(node){return node[options.iconClassProperty]?node[options.iconClassProperty]:"md md-insert-drive-file"},scope.getNodeClass="function"==typeof options.getNodeClass?options.getNodeClass:function(node){return node[options.nodeClassProperty]?node[options.nodeClassProperty]:"node"},scope.hasChildren=function(){return Boolean(scope.node&&scope.node.children&&scope.node.children.length)},scope.selectNode=function(event){event.preventDefault(),options.collapsible&&(scope.expanded=!scope.expanded),controller.selectNode(scope.node,element)},scope.dblClickNode=function(event){event.preventDefault(),event.stopPropagation(),controller.dblClicked(scope.node)},scope.isSelected=function(node){return controller.isSelected(node)},template='<div ng-if="node" class="tree-node" ng-class="getNodeClass(node)"><div ng-if="node.show !== false" class="tree-node-header" ng-click="selectNode($event)" ng-dblclick="dblClickNode($event)" ng-class="{ selected: isSelected(node) }"><i ng-class="getIconClass(node)"></i> <span class="tree-node-name">{{ node.'+options.displayProperty+' }}</span> </div><div class="tree-node-content"'+(options.collapsible?' ng-show="expanded"':"")+'><div ng-repeat="child in node.children" tree-view-node="child" tabindex="-1"></div></div></div><div ng-if="!node" translate class="loading">No items match your query</div>',$compile(template)(scope,function(clone){element.append(clone)})}}}])}(),function(){"use strict";angular.module("ui.scrollbar",[]).service("nicescrollService",function(){var ns={};return ns.niceScroll=function(selector,color,cursorWidth){$(selector).niceScroll({cursorcolor:color,cursorborder:0,cursorborderradius:0,cursorwidth:cursorWidth,bouncescroll:!0,mousescrollstep:100,autohidemode:!1})},ns}).directive("scrollbar",["nicescrollService",function(nicescrollService){return{restrict:"AE",link:function(scope,element,attrs){element.niceScroll({cursorcolor:attrs.scrollbarColor||"rgba(0,0,0,0.5)",cursorborder:0,cursorborderradius:0,cursorwidth:attrs.scrollbarWidth||"5px",bouncescroll:!0,mousescrollstep:100})}}}]).directive("html",["nicescrollService",function(nicescrollService){return{restrict:"E",link:function(scope,element){element.hasClass("ismobile")||$(".login-content")[0]||nicescrollService.niceScroll(element,"rgba(0,0,0,0.3)","5px")}}}]).directive("tableResponsive",["nicescrollService",function(nicescrollService){return{restrict:"C",link:function(scope,element){$("html").hasClass("ismobile")||nicescrollService.niceScroll(element,"rgba(0,0,0,0.3)","5px")}}}]).directive("chosenResults",["nicescrollService",function(nicescrollService){return{restrict:"C",link:function(scope,element){$("html").hasClass("ismobile")||nicescrollService.niceScroll(element,"rgba(0,0,0,0.3)","5px")}}}]).directive("tabNav",["nicescrollService",function(nicescrollService){return{restrict:"C",link:function(scope,element){$("html").hasClass("ismobile")||nicescrollService.niceScroll(element,"rgba(0,0,0,0.3)","1px")}}}]).directive("cOverflow",["nicescrollService",function(nicescrollService){return{restrict:"C",link:function(scope,element){$("html").hasClass("ismobile")||nicescrollService.niceScroll(element,"rgba(0,0,0,0.4)","5px")}}}])}(),function(){"use strict";angular.module("ui.search",["ui.bootstrap.typeahead"]).directive("iqSearch",["$timeout",function($timeout){return{restrict:"E",template:'<div class="search search-{{ theme }}-theme"\n ng-class="{ \'search-is-focused\': model,\n                 \'search-is-closed\': closed }">\n    <div class="search-container">\n        <label class="search-label"><i class="md md-search"></i></label>\n        <input type="text" class="search-input" \n               placeholder="{{ placeholder }}"\n               ng-model="model">\n        <span class="search-cancel" ng-click="clear()"><i class="md md-cancel"></i></span>\n    </div>\n</div>',scope:!0,compile:function(template,attrs){var $input=template.find(".search-input");return attrs.ngEnter&&$input.attr("ng-enter",attrs.ngEnter),angular.forEach(attrs.$attr,function(key,name){var rest=key.substring(4);0==name.indexOf("find")&&$input.attr("typeahead"+rest,attrs[name])}),function(scope,element,attrs,controller,transclude){var $input=element.find(".search-input"),$label=element.find(".search-label"),$searchFilter=element.find(".search"),$searchFilterContainer=element.find(".search-container");scope.find=attrs.find,scope.findTemplateUrl=attrs.findTemplateUrl,scope.theme=attrs.theme,scope.placeholder=attrs.placeholder,scope.closeWithValue=attrs.closeWithValue,scope.closed=angular.isDefined(attrs.closed),angular.isUndefined(scope.theme)&&(scope.theme="dark"),attrs.$observe("filterWidth",function(filterWidth){$searchFilterContainer.css({width:filterWidth})}),$input.on("blur",function(){!angular.isDefined(attrs.closed)||$input.val()&&!scope.closeWithValue||(scope.closeWithValue&&scope.$apply(function(){scope.model=void 0}),$searchFilter.velocity({width:40},{duration:400,easing:"easeOutQuint",queue:!1}))}),$label.on("click",function(){angular.isDefined(attrs.closed)?($searchFilter.velocity({width:attrs.filterWidth?attrs.filterWidth:240},{duration:400,easing:"easeOutQuint",queue:!1}),$timeout(function(){$input.focus()},401)):$input.focus()}),scope.clear=function(){scope.model=void 0,$input.focus()}}}}}])}(),angular.module("ui.select",[]).directive("selectpicker",function(){return{restrict:"C",priority:100,link:function(scope,element,attrs){element.selectpicker()}}}).directive("tagSelect",function(){return{restrict:"C",link:function(scope,element,attrs){element.chosen({width:"100%",allow_single_deselect:!0})}}}),function(){"use strict";angular.module("ui.sidebar",[]).run(["$rootScope","$sidebar",function($rootScope,$sidebar){$rootScope.$on("$stateChangeStart",function(){$sidebar.close()})}]).directive("sidebarSwitch",function(){return{restrict:"AE",replace:!0,scope:{},link:function(scope,element,attrs){var localStorageKey="iqui-sidebar-switched";scope.$watch(function(){return localStorage.getItem(localStorageKey)},function(value){scope.isOn="on"===value,"on"===value?($("body").addClass("toggled sw-toggled"),$("#header").removeClass("sidebar-toggled")):$("body").removeClass("toggled sw-toggled")}),scope.onChange=function(){localStorage.setItem(localStorageKey,scope.isOn?"on":"off")}},template:'<div class="toggle-switch sidebar-switch">\n    <input id="tw-switch" type="checkbox" hidden="hidden" ng-change="onChange()" ng-model="isOn">\n    <label for="tw-switch" class="ts-helper"></label>\n</div>'}}).factory("$sidebar",["$rootScope","$document","$timeout","$injector","$controller","$q","$compile","$templateRequest",function($rootScope,$document,$timeout,$injector,$controller,$q,$compile,$templateRequest){function _getTemplatePromise(options){return options.template?$q.when(options.template):$templateRequest(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl)}function _getResolvePromises(options){var promisesArr=[];return angular.forEach(options.resolve,function(value){promisesArr.push(angular.isFunction(value)?$q.when($injector.invoke(value)):$q.when(value))}),promisesArr}function _createScope(options,resolves){var scope,ctrlInstance,i,ctrlLocals={};return options.scope=options.scope||$rootScope,scope=options.scope.$new(),options.controller?(ctrlLocals.$scope=scope,i=1,angular.forEach(options.resolve,function(value,key){ctrlLocals[key]=resolves[i++]}),ctrlInstance=$controller(options.controller,ctrlLocals),options.controllerAs&&(scope[options.controllerAs]=ctrlInstance)):(i=1,angular.forEach(options.resolve,function(value,key){scope[key]=resolves[i++]})),scope}function _onClickOutside(sidebar){return function(event){$(event.target).closest($(sidebar.element[0])).length||$timeout(function(){sidebar.hide()})}}function Sidebar(options){var resolvePromise,_this=this;if(options.resolve=options.resolve||{},!options.template&&!options.templateUrl)throw new Error("One of template or templateUrl options is required.");resolvePromise=$q.all([_getTemplatePromise(options)].concat(_getResolvePromises(options))),resolvePromise.then(function(resolves){var sidebarTemplate='<aside class="sidebar"></aside>',element=angular.element(sidebarTemplate);_this.content=resolves[0],_this.scope=_createScope(options,resolves),_this.scope.$parent.$on("$destroy",function(){_this.destroy()}),element.html(_this.content),element.addClass(options.side||"left"),_this.element=$compile(element)(_this.scope),body.append(_this.element)}),this.options=options,this.isHidden=!0,this.$promise=resolvePromise}var _api={},body=$document.find("body").eq(0);return Sidebar.prototype.show=function(){var _this=this,deferred=$q.defer();return this.scope.$close=function(data){deferred.resolve(data),_this.hide()},this.scope.$dismiss=function(data){deferred.reject(data),_this.hide()},this.clickHandler=_onClickOutside(this),$document.on("mouseup",this.clickHandler),this.element.addClass("toggled"),this.isHidden=!1,deferred.promise},Sidebar.prototype.hide=function(){this.element.removeClass("toggled"),this.isHidden=!0,$document.off("mouseup",this.clickHandler)},Sidebar.prototype.toggle=function(){this.isHidden?this.show():this.hide()},Sidebar.prototype.destroy=function(){this.hide()},_api.create=function(options){return new Sidebar(options)},_api.close=function(){$("#sidebar").removeClass("toggled"),$("#header").removeClass("sidebar-toggled"),$("#sidebar-trigger").removeClass("open")},_api}]),$("body").on("click","#sidebar-trigger",function(e){var x=$(this).data("trigger"),$sidebar="#sidebar",$trigger="#sidebar-trigger";e.preventDefault(),$(x).toggleClass("toggled"),$(this).toggleClass("open"),$("#header").toggleClass("sidebar-toggled"),$(".sub-menu.toggled").not(".active").each(function(){$(this).removeClass("toggled"),$(this).find("ul").hide()}),$(".profile-menu .main-menu").hide(),$("#header").hasClass("sidebar-toggled")&&$(document).on("click",function(e){0===$(e.target).closest($sidebar).length&&0===$(e.target).closest($trigger).length&&setTimeout(function(){$($sidebar).removeClass("toggled"),$("#header").removeClass("sidebar-toggled"),$($trigger).removeClass("open")})})}),$("body").on("click",".sub-menu > a",function(e){e.preventDefault(),$(this).next().slideToggle(200),$(this).parent().toggleClass("toggled");

}),$("#sidebar").removeClass("toggled"),$("#header").removeClass("sidebar-toggled"),$("#sidebar-trigger").removeClass("open")}(),function(){"use strict";angular.module("ui.toaster",["ngAnimate","ngSanitize"]).provider("$toaster",function(){var _config;_config={limit:3,"tap-to-dismiss":!0,"newest-on-top":!0,"time-out":5e3,aggregate:!1,"icon-classes":{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},"body-output-type":"trustedHtml","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-bottom-right","title-class":"toast-title","message-class":"toast-message"},this.config=function(config){return angular.extend(_config,config),this},this.$get=["$rootScope",function($rootScope){function _handleError(event,title){$rootScope.$on(event,function(event,message){_show("error",title,message,0)})}function _show(type,title,body,timeout,bodyOutputType){body?_api.toast={type:type,title:title,body:body,timeout:timeout,bodyOutputType:bodyOutputType}:_api.toast={type:type,body:title,timeout:timeout,bodyOutputType:bodyOutputType},$rootScope.$broadcast("toaster-newToast")}function _showType(type){return function(title,text){angular.isObject(text)&&(text=JSON.stringify(text)),_show(type,title,text,_config["time-out"],"trustedHtml")}}function _clear(){$rootScope.$broadcast("toaster-clearToasts")}var _api;if(_config.errors)for(var key in _config.errors)_config.errors.hasOwnProperty(key)&&_handleError(key,_config.errors[key]);return _api={show:_show,alert:_showType("warning"),warn:_showType("warning"),warning:_showType("warning"),error:_showType("error"),info:_showType("info"),success:_showType("success"),clear:_clear,config:_config}}]}).directive("toaster",["$compile","$timeout","$sce","$toaster",function($compile,$timeout,$sce,$toaster){return{replace:!0,restrict:"EA",scope:!0,link:function(scope,element,attrs){function addToast(toast){switch(toast.type=mergedConfig["icon-classes"][toast.type],toast.type||(toast.type=mergedConfig["icon-class"]),id++,angular.extend(toast,{id:id}),toast.bodyOutputType=toast.bodyOutputType||mergedConfig["body-output-type"],toast.bodyOutputType){case"trustedHtml":toast.html=$sce.trustAsHtml(toast.body);break;case"template":toast.bodyTemplate=toast.body||mergedConfig["body-template"]}scope.configureTimer(toast),mergedConfig["newest-on-top"]===!0?(scope.toasters.unshift(toast),mergedConfig.limit>0&&scope.toasters.length>mergedConfig.limit&&scope.toasters.pop()):(scope.toasters.push(toast),mergedConfig.limit>0&&scope.toasters.length>mergedConfig.limit&&scope.toasters.shift())}var id=0,mergedConfig=$toaster.config;attrs.toasterOptions&&(mergedConfig=angular.extend({},$toaster.config,scope.$eval(attrs.toasterOptions))),scope.config={position:mergedConfig["position-class"],title:mergedConfig["title-class"],message:mergedConfig["message-class"],tap:mergedConfig["tap-to-dismiss"]},scope.configureTimer=function(toast){var timeout="number"==typeof toast.timeout?toast.timeout:mergedConfig["time-out"];timeout>0&&(toast.timeout=$timeout(function(){scope.removeToast(toast.id)},timeout))},scope.toasters=[],scope.$on("toaster-newToast",function(){mergedConfig.aggregate&&0!==scope.toasters.length||addToast($toaster.toast)}),scope.$on("toaster-clearToasts",function(){scope.toasters.splice(0,scope.toasters.length)})},controller:["$scope",function($scope){$scope.stopTimer=function(toast){toast.timeout&&($timeout.cancel(toast.timeout),toast.timeout=null)},$scope.restartTimer=function(toast){toast.timeout||$scope.configureTimer(toast)},$scope.removeToast=function(id){var i=0;for(i;i<$scope.toasters.length&&$scope.toasters[i].id!==id;i++);$scope.toasters.splice(i,1)},$scope.remove=function(id){$scope.config.tap===!0&&$scope.removeToast(id)}}],template:'<div  id="toast-container" ng-class="config.position"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="remove(toaster.id)" ng-mouseover="stopTimer(toaster)"  ng-mouseout="restartTimer(toaster)"><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])}(),function(){$("body").on("click","#top-search > a",function(e){e.preventDefault(),$("#top-search-wrap > input").focus(),$("#header").addClass("search-toggled"),$("#top-search-wrap > input").keydown(function(e){27==e.keyCode&&($("#header").removeClass("search-toggled"),e.stopPropagation())})}),$("body").on("click","#top-search-close",function(e){e.preventDefault(),$("#header").removeClass("search-toggled")})}(),function(){"use strict";var _i18n=window.IQ_I18N||{pl:{}};angular.module("ui.translate",["ui.toaster"]).factory("$i18n",function(){return _i18n}).provider("$translate",function(){var _language="pl";this.language=function(language){return _language=language,this},this.$get=function(){function translate(key){var value;return angular.isDefined(key)&&null!==key?("function"==typeof key.trim&&(key=key.trim()),value=_i18n[_language][key],value?value:key):""}return translate}}).filter("translate",["$translate",function($translate){return function(value){return $translate(value)}}]).directive("translate",["$translate",function($translate){return{restrict:"AE",link:function(scope,element,attrs){element.html($translate(element.html()))}}}]).factory("$format",["$translate",function($translate){function formatString(){var message,format=arguments[0],params=Array.prototype.slice.call(arguments,1);return format=$translate(format),message=format.replace(/{(\d+)}/g,function(match,number){var replacement="No value";return replacement="undefined"==typeof params[number]?match:null===params[number]?"("+$translate("No value")+")":$translate(params[number])})}return formatString}]).factory("$toast",["$toaster","$format",function($toaster,$format){function show(type){var toasterFn=$toaster[type];return function(){var message=$format.apply(this,arguments),colon=message.indexOf(":");message=message.slice(0,colon+1)+"<strong>"+message.slice(colon+1)+"</strong>",toasterFn.call(null,message)}}return{error:show("error"),info:show("info"),warn:show("warn"),success:show("success")}}])}(),function(){"use strict";angular.module("ui.utils",[]).factory("$scroll",function(){var _api={};return _api.toBottom=function(){window.scrollTo(0,document.body.scrollHeight)},_api.toTop=function(){window.scrollTo(0,0)},_api}).factory("$fileSize",function(){function fileSize(arg){var descriptor=void 0===arguments[1]?{}:arguments[1],result=[],skip=!1,val=0,e=void 0,base=void 0,bits=void 0,ceil=void 0,neg=void 0,num=void 0,output=void 0,round=void 0,unix=void 0,spacer=void 0,suffixes=void 0;if(isNaN(arg))throw new Error("Invalid arguments");return bits=descriptor.bits===!0,unix=descriptor.unix===!0,base=void 0!==descriptor.base?descriptor.base:2,round=void 0!==descriptor.round?descriptor.round:unix?1:2,spacer=void 0!==descriptor.spacer?descriptor.spacer:unix?"":" ",suffixes=void 0!==descriptor.suffixes?descriptor.suffixes:{},output=void 0!==descriptor.output?descriptor.output:"string",e=void 0!==descriptor.exponent?descriptor.exponent:-1,num=Number(arg),neg=0>num,ceil=base>2?1e3:1024,neg&&(num=-num),0===num?(result[0]=0,unix?result[1]="":result[1]="B"):((-1===e||isNaN(e))&&(e=Math.floor(Math.log(num)/Math.log(ceil))),e>8&&(val=1e3*val*(e-8),e=8),val=2===base?num/Math.pow(2,10*e):num/Math.pow(1e3,e),bits&&(val=8*val,val>ceil&&(val/=ceil,e++)),result[0]=Number(val.toFixed(e>0?round:0)),result[1]=si[bits?"bits":"bytes"][e],!skip&&unix&&(bits&&bit.test(result[1])&&(result[1]=result[1].toLowerCase()),result[1]=result[1].charAt(0),"B"===result[1]?(result[0]=Math.floor(result[0]),result[1]=""):bits||"k"!==result[1]||(result[1]="K"))),neg&&(result[0]=-result[0]),result[1]=suffixes[result[1]]||result[1],"array"===output?result:"exponent"===output?e:"object"===output?{value:result[0],suffix:result[1]}:result.join(spacer)}var bit=/b$/,si={bits:["B","kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","kB","MB","GB","TB","PB","EB","ZB","YB"]};return fileSize}).filter("fileSize",["$fileSize",function($fileSize){return function(value,config){return value?$fileSize(value,config):""}}]).directive("indeterminate",function(){return{require:"?ngModel",link:function(scope,element,attrs,ngModelCtrl){ngModelCtrl.$formatters=[],ngModelCtrl.$parsers=[],ngModelCtrl.$render=function(){var value=ngModelCtrl.$viewValue;switch(element.data("checked",value),value){case!0:element.prop("indeterminate",!1),element.prop("checked",!0);break;case!1:element.prop("indeterminate",!1),element.prop("checked",!1);break;default:element.prop("indeterminate",!0)}},element.bind("click",function(){var value;switch(element.data("checked")){case!1:value=!0;break;case!0:value=null;break;default:value=!1}ngModelCtrl.$setViewValue(value),scope.$apply(ngModelCtrl.$render)})}}}).directive("btnWave",function(){return{restrict:"C",link:function(scope,element){Waves.attach(element),Waves.init()}}}).directive("btn",["$timeout",function($timeout){return{restrict:"C",link:function(scope,element){element.is("input")||element.hasClass("no-waves")||element.addClass(element.is("a")||element.hasClass("btn-link")?"waves-effect waves-button":"waves-effect"),$timeout(function(){Waves.init()})}}}]).directive("fgLine",function(){return{restrict:"C",link:function(scope,element){$(".fg-line")[0]&&($("body").on("focus",".form-control",function(){$(this).closest(".fg-line").addClass("fg-toggled")}),$("body").on("blur",".form-control",function(){var p=$(this).closest(".form-group"),i=p.find(".form-control").val();p.hasClass("fg-float")?0==i.length&&$(this).closest(".fg-line").removeClass("fg-toggled"):$(this).closest(".fg-line").removeClass("fg-toggled")}))}}}).directive("autosize",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attrs){$timeout(function(){element.autosize()})}}}]).directive("tagSelect",function(){return{restrict:"A",link:function(scope,element){element[0]&&element.chosen({width:"100%",allow_single_deselect:!0})}}}).directive("toggleSwitch",function(){var id=1;return{restrict:"AE",replace:!0,transclude:!0,scope:{ngModel:"=",ngChange:"&",ngDisabled:"=",name:"@",on:"@",off:"@"},link:function(scope,element,attrs){scope.id=id++},template:'<div class="toggle-switch" ng-class="{active: ngModel}">\n    <label for="toggle-{{ id }}" ng-if="!off && !on" class="ts-label" ng-transclude> </label>\n    <label for="toggle-{{ id }}" ng-if="off" class="ts-label before" > {{ off }}</label>\n    \n    <input id="toggle-{{ id }}" type="checkbox" hidden="hidden" name="{{ name }}" ng-model="ngModel" ng-disabled="ngDisabled" ng-change="ngChange()">\n    <label for="toggle-{{ id }}" class="ts-helper"></label>\n    \n    <label for="toggle-{{ id }}" ng-if="on" class="ts-label after" > {{ on }}</label>\n</div>'}}).directive("navTabs",function(){return{restrict:"C",link:function(scope,element,attrs){element.addClass("tab-nav")}}}).directive("errSrc",function(){return{link:function(scope,element,attrs){scope.$watch(function(){return attrs.ngSrc},function(value){value||element.attr("src",attrs.errSrc)}),element.bind("error",function(){element.attr("src",attrs.errSrc)})}}}).directive("prettyCode",["$timeout",function($timeout){return{restrict:"AE",transclude:!0,replace:!0,link:function(scope,element,attrs){var codeElement=element.find("code")[0];window.prettyPrintOne&&$timeout(function(){codeElement.innerHTML=window.prettyPrintOne(codeElement.innerText)})},template:'<pre class="prettyprint"><code class="language-yaml" ng-transclude></code></pre>'}}]).directive("fileUpload",["$utils",function($utils){return{restrict:"E",template:'<div class="fileinput">\n    <div class="btn btn-primary btn-file">\n        <span class="fileinput-label">Wybierz plik</span>\n        <input type="hidden" value="" name="...">\n        <input type="file" name="">\n    </div>\n    <div class="fileinput-fileinfo alert alert-info alert-dismissible" ng-show="file">\n        <button type="button" class="close" ng-click="clear()"><span aria-hidden="true">&times;</span></button>\n        \n        <dl class="dl-horizontal">\n            <dt>Nazwa: </dt>\n            <dd>{{ file.name}}</dd>\n            <dt>Wielko: </dt>\n            <dd>{{ file.size | fileSize}}</dd>\n            <dt>Typ: </dt>\n            <dd>{{ file.type }}</dd>\n        </dl>\n    </div>\n    \n</div>',require:"ngModel",scope:{validate:"&",file:"=ngModel"},replace:!0,link:function(scope,element,attr,ctrl){var input;input=element.find("input"),"function"!=typeof scope.validate&&(scope.validate=function(){return!0});var listener=function(){scope.$apply(function(){var file=input[1].files[0];file&&scope.validate({$file:file})&&(scope.file=file)})};input.bind("change",listener),scope.clear=function(){scope.file=void 0}}}}]).directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter,{event:event})}),event.preventDefault())})}}).directive("ngEscape",["$document",function($document){function unbind(handler){$document.unbind("keydown keypress",handler)}function bind(handler){var handlersCount=handlers.length;handlersCount>0&&unbind(handlers[handlersCount-1]),$document.bind("keydown keypress",handler),handlers.push(handler)}var handlers=[];return function(scope,element,attrs){function clickHandler(event){27===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEscape,{event:event})}),event.preventDefault())}bind(clickHandler),scope.$on("$destroy",function(){unbind(clickHandler),handlers.pop(),bind(handlers[handlers.length-1])})}}]).directive("spinner",function(){return{restrict:"AE",replace:!0,template:'<div class="spinner spinner-wave">\n          <div class="rect1"></div>\n          <div class="rect2"></div>\n          <div class="rect3"></div>\n          <div class="rect4"></div>\n          <div class="rect5"></div>\n        </div>'}}).directive("radioButton",function(){return{restrict:"AE",transclude:!0,replace:!0,scope:{ngModel:"=",value:"@"},controller:["$scope","$element","$attrs",function($scope,$element,$attrs){}],link:function(scope,element,attrs){},template:'<label class="radio"><input type="radio" name="radioGroup" value="{{value}}" data-toggle="radio" ng-model="ngModel" class="custom-radio"><span class="icons"><span class="icon-unchecked"></span><span class="icon-checked"></span></span><span ng-transclude></span></label>'}})}(),angular.module("ui.templates",["template/datetimepicker/datepicker.tpl.html","template/datetimepicker/datetimepicker.html","template/datetimepicker/timepicker.tpl.html","template/datetimepicker/tooltip.tpl.html","template/organisation/select-organisation.tpl.html","template/tabs/tabset.html"]),angular.module("template/datetimepicker/datepicker.tpl.html",[]).run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/datetimepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 210px;">\n    <table style="table-layout: fixed; height: 100%; width: 100%;">\n        <thead>\n        <tr class="text-center">\n            <th>\n                <button tabindex="-1" type="button" class="btn btn-link pull-left" ng-click="$selectPane(-1)">\n                    <i class="{{$iconLeft}}"></i>\n                </button>\n            </th>\n            <th colspan="{{ rows[0].length - 2 }}">\n                <button tabindex="-1" type="button" class="btn btn-link btn-block text-strong"\n                        ng-click="$toggleMode()">\n                    <strong style="text-transform: capitalize;" ng-bind="title"></strong>\n                </button>\n            </th>\n            <th>\n                <button tabindex="-1" type="button" class="btn btn-link pull-right" ng-click="$selectPane(+1)">\n                    <i class="{{$iconRight}}"></i>\n                </button>\n            </th>\n        </tr>\n        <tr ng-show="showLabels" ng-bind-html="labels"></tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%">\n            <td class="text-center" ng-repeat="(j, el) in row">\n                <button tabindex="-1" type="button" class="btn btn-link btn-sm"\n                        ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}"\n                        ng-click="$select(el.date)" ng-disabled="el.disabled">\n                    <span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span>\n                </button>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n\n    <div style="padding:10px 0px 20px 0px">\n		<span class="pull-left">\n			<button type="button" class="btn btn-icon" tabindex="-1" ng-click="$today()" tooltip="Dzi" tooltip-placement="bottom"><i class="md md-event c-blue"></i></button>\n			<button type="button" class="btn btn-icon" tabindex="-1" ng-click="$clear()" tooltip="Kasuj" tooltip-placement="bottom"><i class="md md-clear c-red"></i></button>\n		</span>\n        <button type="button" class="btn btn-icon pull-right"  tabindex="-1" ng-click="$close()" tooltip="Zamknij" tooltip-placement="bottom"><i class="md md-done c-green"></i></button>\n    </div>\n</div>\n')}]),angular.module("template/datetimepicker/datetimepicker.html",[]).run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/datetimepicker/datetimepicker.html",'<div class="datetimepicker form-inline">\n\n    <div class="form-group">\n        <input type="text"\n               class="date form-control"\n               size="11"\n               ng-model="ngModel"\n               is-dirty="{{ isDirty }}"\n               min-date="{{ minDate }}"\n               max-date="{{ maxDate }}"\n               placeholder="{{ dateFormat }}"\n               bs-datepicker>\n    </div>\n\n\n    <div class="form-group">\n        <input type="text"\n               class="time form-control"\n               size="8"\n               ng-change="touchDate()"\n               ng-model="ngModel"\n               ng-show="!dateOnly"\n               placeholder="{{ timeFormat }}"\n               bs-timepicker>\n    </div>\n\n</div>\n')}]),angular.module("template/datetimepicker/timepicker.tpl.html",[]).run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/datetimepicker/timepicker.tpl.html",'<div class="dropdown-menu timepicker" style="min-width: 0px;width: auto;">\n    <table height="100%">\n        <thead>\n        <tr class="text-center">\n            <th>\n                <button tabindex="-1" type="button" class="btn btn-link pull-left no-waves" ng-click="$arrowAction(-1, 0)">\n                    <i class="{{ $iconUp }}"></i>\n                </button>\n            </th>\n            <th>\n                &nbsp;\n            </th>\n            <th>\n                <button tabindex="-1" type="button" class="btn btn-link pull-left no-waves" ng-click="$arrowAction(-1, 1)">\n                    <i class="{{ $iconUp }}"></i>\n                </button>\n            </th>\n            <th>\n                &nbsp;\n            </th>\n            <th>\n                <button ng-if="showSeconds" tabindex="-1" type="button" class="btn btn-link pull-left no-waves"\n                        ng-click="$arrowAction(-1, 2)">\n                    <i class="{{ $iconUp }}"></i>\n                </button>\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="(i, row) in rows">\n            <td class="text-center">\n                <button tabindex="-1"  type="button" class="btn btn-link btn-sm"\n                        ng-class="{\'btn-primary\': row[0].selected}" ng-click="$select(row[0].date, 0)"\n                        ng-disabled="row[0].disabled">\n                    <span ng-class="{\'text-muted\': row[0].muted}" ng-bind="row[0].label"></span>\n                </button>\n            </td>\n            <td>\n                <span ng-bind="i == midIndex ? timeSeparator : \' \'"></span>\n            </td>\n            <td class="text-center">\n                <button tabindex="-1" ng-if="row[1].date"  type="button" class="btn btn-link btn-sm"\n                        ng-class="{\'btn-primary\': row[1].selected}" ng-click="$select(row[1].date, 1)"\n                        ng-disabled="row[1].disabled">\n                    <span ng-class="{\'text-muted\': row[1].muted}" ng-bind="row[1].label"></span>\n                </button>\n            </td>\n            <td>\n                <span ng-bind="i == midIndex ? timeSeparator : \' \'"></span>\n            </td>\n            <td class="text-center">\n                <button tabindex="-1" ng-if="showSeconds && row[2].date"  type="button"\n                        class="btn btn-link btn-sm" ng-class="{\'btn-primary\': row[2].selected}"\n                        ng-click="$select(row[2].date, 2)" ng-disabled="row[2].disabled">\n                    <span ng-class="{\'text-muted\': row[2].muted}" ng-bind="row[2].label"></span>\n                </button>\n            </td>\n            <td ng-if="showAM">\n                &nbsp;\n            </td>\n            <td ng-if="showAM">\n                <button tabindex="-1" ng-show="i == midIndex - !isAM * 1"  type="button"\n                        ng-class="{\'btn-primary\': !!isAM}" class="btn btn-link btn-sm" ng-click="$switchMeridian()"\n                        ng-disabled="el.disabled">AM\n                </button>\n                <button tabindex="-1" ng-show="i == midIndex + 1 - !isAM * 1"  type="button"\n                        ng-class="{\'btn-primary\': !isAM}" class="btn btn-link btn-sm" ng-click="$switchMeridian()"\n                        ng-disabled="el.disabled">PM\n                </button>\n            </td>\n        </tr>\n        </tbody>\n        <tfoot>\n        <tr class="text-center">\n            <th>\n                <button tabindex="-1" type="button" class="btn btn-link  pull-left no-waves" ng-click="$arrowAction(1, 0)">\n                    <i class="{{ $iconDown }}"></i>\n                </button>\n            </th>\n            <th>\n                &nbsp;\n            </th>\n            <th>\n                <button tabindex="-1" type="button" class="btn btn-link  pull-left no-waves" ng-click="$arrowAction(1, 1)">\n                    <i class="{{ $iconDown }}"></i>\n                </button>\n            </th>\n            <th>\n                &nbsp;\n            </th>\n            <th>\n                <button ng-if="showSeconds" tabindex="-1" type="button" class="btn btn-link  pull-left no-waves"\n                        ng-click="$arrowAction(1, 2)">\n                    <i class="{{ $iconDown }}"></i>\n                </button>\n            </th>\n        </tr>\n        </tfoot>\n    </table>\n</div>\n')}]),angular.module("template/datetimepicker/tooltip.tpl.html",[]).run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/datetimepicker/tooltip.tpl.html",'<div class="tooltip in" ng-show="title">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="title"></div>\n</div>\n')}]),angular.module("template/organisation/select-organisation.tpl.html",[]).run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/organisation/select-organisation.tpl.html",'<div class="dropdown" dropdown auto-close="outsideClick" is-open="isDropdownOpen">\n    <a href="" class="dropdown-toggle form-control" dropdown-toggle ng-disabled="ngDisabled" ng-required="ngRequired">\n        {{ assignee.user || \'Select element...\' | translate}}\n    </a>\n\n    <div class="dropdown-menu dropdown-menu-lg">\n        <div class="search-wrapper">\n            <input type="text"\n                   class="form-control search-input"\n                   placeholder="{{ \'Search...\' | translate}}"\n                   ng-model="search"\n                   ng-enter="false"\n                   tabindex="1"\n                   ng-change="searchTree()">\n        </div>\n\n        <input ng-model="assignee" style="display: none;" name="assignee">\n\n        <div tree-view="tree"\n             tree-view-options="options"\n             focus-if="isDropdownOpen"\n             tabindex="2"\n             ng-model="assignee"></div>\n    </div>\n</div>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/tabs/tabset.html",'<div>\n    <ul class="tab-nav" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n    <div class="tab-content">\n        <div class="tab-pane"\n             ng-repeat="tab in tabs"\n             ng-class="{active: tab.active}"\n             tab-content-transclude="tab">\n        </div>\n    </div>\n</div>\n')}]);